import{_ as Q}from"./index-Dw8XF3Uo.js";import{d as P,eb as X,r as b,K as ee,Z as le,$ as te,c as E,o as V,e as s,a8 as A,a2 as D,a7 as I,eC as ae,b2 as re,a as oe,fS as se,n as F,U as de,w as l,b as e,f as ne,i as _,aP as ue,aO as pe,u as o,aJ as ie,aL as me,aM as fe,aN as ge,q as h,a6 as L,F as ce,v as _e,t as M,az as be,aE as ye,bS as ve,bj as xe,p as Ve}from"./index-CohFp7-Q.js";import{_ as ke}from"./index-DZo1sQI5.js";import{E as Ue}from"./time-picker-Dxh09iDx.js";import{E as Se,a as he}from"./col-LkasFWbn.js";import{E as Ee}from"./date-picker-Dfxe5osJ.js";import{_ as qe}from"./index-Cc8Tmrb1.js";import"./isArrayLikeObject-2i--ix4E.js";import"./arrays-DkbAMzH8.js";import"./index-CuXYdo4C.js";const Te={bodyStyle:Object,extraStyle:Object,teleported:Boolean},$e=P({name:"EleBottomBar",__name:"index",props:Te,setup(R){const y=X(),v=b(!0),a=ee(()=>{var i;return(i=y.getBodyWrapperEl)==null?void 0:i.call(y)});return le(()=>{v.value=!0}),te(()=>{v.value=!1}),(i,q)=>(V(),E(ae,{to:a.value,disabled:!i.teleported||!a.value},[s("div",{class:I(["ele-bottom-bar",{"is-deactivated":!v.value}])},[s("div",{class:"ele-bottom-bar-body",style:A(i.bodyStyle)},[D(i.$slots,"default")],4),s("div",{class:"ele-bottom-bar-extra",style:A(i.extraStyle)},[D(i.$slots,"extra")],4)],2)],8,["to","disabled"]))}}),Be={style:{"--ele-table-padding":"6px 8px"}},Ce={style:{textAlign:"center",position:"sticky",left:0,zIndex:98},class:"user-table-index"},we={style:{textAlign:"center",position:"sticky",right:0,zIndex:98},class:"user-table-action"},ze={key:0},Ae={colspan:"5",style:{"text-align":"center"}},De=P({name:"FormAdvanced",__name:"index",setup(R){const y=b(!1),v=b(null),[a,i]=re({name:"",url:"",administrator:void 0,approver:void 0,datetime:"",type:void 0,task:"",description:"",executor:void 0,officer:void 0,reminder:void 0,taskType:void 0,users:[]}),q=oe({name:[{required:!0,message:"请输入仓库名",type:"string",trigger:"blur"}],url:[{required:!0,message:"请输入仓库域名",type:"string",trigger:"blur"}],administrator:[{required:!0,message:"请选择仓库管理员",type:"string",trigger:"change"}],approver:[{required:!0,message:"请选择审批人",type:"string",trigger:"change"}],datetime:[{required:!0,message:"请选择生效时间",type:"string",trigger:"blur"}],type:[{required:!0,message:"请选择仓库类型",type:"string",trigger:"change"}],task:[{required:!0,message:"请输入任务名",type:"string",trigger:"blur"}],description:[{required:!0,message:"请输入任务表述",type:"string",trigger:"blur"}],executor:[{required:!0,message:"请选择执行人",type:"string",trigger:"change"}],officer:[{required:!0,message:"请选择责任人",type:"string",trigger:"change"}],reminder:[{required:!0,message:"请选择提醒时间",type:"array",trigger:"change"}],taskType:[{required:!0,message:"请选择任务类型",type:"string",trigger:"change"}]}),U=b(""),J=()=>{var d,t;(t=(d=v.value)==null?void 0:d.validate)==null||t.call(d,(m,g)=>{if(!m){const f=g?Object.keys(g).length:0;U.value=` 共有 ${f} 项校验不通过`;return}U.value="",y.value=!0,setTimeout(()=>{y.value=!1,F.success("提交成功"),i()},1e3)})},N=()=>{a.users.push({key:Date.now()+"-"+a.users.length,number:"",name:"",department:void 0})},O=(d,t)=>{a.users.splice(t,1)};se().then(d=>{a.users=d}).catch(d=>{F.error(d.message)});const S=b(null),T=b(!1),$=b(!1),W=d=>{B(d.currentTarget)},B=d=>{const t=d.scrollLeft;T.value=t>1;const m=d.scrollWidth-d.clientWidth-1;$.value=m>1&&t<m};return de(()=>{S.value&&B(S.value)}),(d,t)=>{const m=ne,g=qe,f=me,n=ie,p=he,u=ge,c=fe,H=Ee,C=Se,Y=Ue,j=be,K=ke,w=ye,Z=ue,z=Q,G=$e;return V(),E(z,{plain:"","multi-card":!1},{default:l(()=>[e(g,{style:{"border-radius":"0"}},{default:l(()=>[e(m,{type:"heading",size:"lg"},{default:l(()=>t[13]||(t[13]=[_("复杂表单")])),_:1}),e(m,{type:"placeholder",style:{"margin-top":"6px"}},{default:l(()=>t[14]||(t[14]=[_(" 复杂表单常见于一次性输入和提交大批量数据的场景。 ")])),_:1})]),_:1}),e(z,null,{default:l(()=>[e(Z,{ref_key:"formRef",ref:v,model:o(a),rules:q,"label-width":"100px",onSubmit:t[12]||(t[12]=pe(()=>{},["prevent"]))},{default:l(()=>[e(g,{header:"仓库信息","body-style":{padding:"24px 20px 8px 2px"}},{default:l(()=>[e(C,{gutter:12},{default:l(()=>[e(p,{lg:8,md:12,sm:12,xs:24},{default:l(()=>[e(n,{label:"仓库名",prop:"name"},{default:l(()=>[e(f,{maxlength:"40",clearable:"",modelValue:o(a).name,"onUpdate:modelValue":t[0]||(t[0]=r=>o(a).name=r),placeholder:"请输入仓库名"},null,8,["modelValue"])]),_:1})]),_:1}),e(p,{lg:8,md:12,sm:12,xs:24},{default:l(()=>[e(n,{label:"仓库域名",prop:"url"},{default:l(()=>[e(f,{clearable:"",modelValue:o(a).url,"onUpdate:modelValue":t[1]||(t[1]=r=>o(a).url=r),placeholder:"请输入"},{prepend:l(()=>t[15]||(t[15]=[_("https://")])),append:l(()=>t[16]||(t[16]=[_(".com")])),_:1},8,["modelValue"])]),_:1})]),_:1}),e(p,{lg:8,md:12,sm:12,xs:24},{default:l(()=>[e(n,{label:"仓库管理员",prop:"administrator"},{default:l(()=>[e(c,{clearable:"",modelValue:o(a).administrator,"onUpdate:modelValue":t[2]||(t[2]=r=>o(a).administrator=r),placeholder:"请选择仓库管理员",class:"ele-fluid","popper-options":{strategy:"fixed"}},{default:l(()=>[e(u,{value:"1",label:"SunSmile"}),e(u,{value:"2",label:"Jasmine"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(p,{lg:8,md:12,sm:12,xs:24},{default:l(()=>[e(n,{label:"审批人",prop:"approver"},{default:l(()=>[e(c,{clearable:"",modelValue:o(a).approver,"onUpdate:modelValue":t[3]||(t[3]=r=>o(a).approver=r),placeholder:"请选择审批人",class:"ele-fluid","popper-options":{strategy:"fixed"}},{default:l(()=>[e(u,{value:"1",label:"SunSmile"}),e(u,{value:"2",label:"Jasmine"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(p,{lg:8,md:12,sm:12,xs:24},{default:l(()=>[e(n,{label:"生效时间",prop:"datetime"},{default:l(()=>[e(H,{type:"datetime",modelValue:o(a).datetime,"onUpdate:modelValue":t[4]||(t[4]=r=>o(a).datetime=r),"value-format":"YYYY-MM-DD HH:mm:ss",placeholder:"请选择生效时间",class:"ele-fluid","popper-options":{strategy:"fixed"}},null,8,["modelValue"])]),_:1})]),_:1}),e(p,{lg:8,md:12,sm:12,xs:24},{default:l(()=>[e(n,{label:"仓库类型",prop:"type"},{default:l(()=>[e(c,{clearable:"",modelValue:o(a).type,"onUpdate:modelValue":t[5]||(t[5]=r=>o(a).type=r),placeholder:"请选择仓库类型",class:"ele-fluid","popper-options":{strategy:"fixed"}},{default:l(()=>[e(u,{value:"private",label:"私密"}),e(u,{value:"public",label:"公开"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(g,{header:"任务信息","body-style":{padding:"24px 20px 8px 2px"}},{default:l(()=>[e(C,{gutter:12},{default:l(()=>[e(p,{lg:8,md:12,sm:12,xs:24},{default:l(()=>[e(n,{label:"任务名",prop:"task"},{default:l(()=>[e(f,{clearable:"",modelValue:o(a).task,"onUpdate:modelValue":t[6]||(t[6]=r=>o(a).task=r),placeholder:"请输入任务名"},null,8,["modelValue"])]),_:1})]),_:1}),e(p,{lg:8,md:12,sm:12,xs:24},{default:l(()=>[e(n,{label:"任务表述",prop:"description"},{default:l(()=>[e(f,{clearable:"",modelValue:o(a).description,"onUpdate:modelValue":t[7]||(t[7]=r=>o(a).description=r),placeholder:"请输入任务表述"},null,8,["modelValue"])]),_:1})]),_:1}),e(p,{lg:8,md:12,sm:12,xs:24},{default:l(()=>[e(n,{label:"执行人",prop:"executor"},{default:l(()=>[e(c,{clearable:"",modelValue:o(a).executor,"onUpdate:modelValue":t[8]||(t[8]=r=>o(a).executor=r),placeholder:"请选择执行人",class:"ele-fluid","popper-options":{strategy:"fixed"}},{default:l(()=>[e(u,{value:"1",label:"SunSmile"}),e(u,{value:"2",label:"Jasmine"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(p,{lg:8,md:12,sm:12,xs:24},{default:l(()=>[e(n,{label:"责任人",prop:"officer"},{default:l(()=>[e(c,{clearable:"",modelValue:o(a).officer,"onUpdate:modelValue":t[9]||(t[9]=r=>o(a).officer=r),placeholder:"请选择责任人",class:"ele-fluid","popper-options":{strategy:"fixed"}},{default:l(()=>[e(u,{value:"1",label:"SunSmile"}),e(u,{value:"2",label:"Jasmine"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(p,{lg:8,md:12,sm:12,xs:24},{default:l(()=>[e(n,{label:"提醒时间",prop:"reminder"},{default:l(()=>[e(Y,{"is-range":"","range-separator":"-",modelValue:o(a).reminder,"onUpdate:modelValue":t[10]||(t[10]=r=>o(a).reminder=r),"start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":"HH:mm:ss",class:"ele-fluid","popper-options":{strategy:"fixed"}},null,8,["modelValue"])]),_:1})]),_:1}),e(p,{lg:8,md:12,sm:12,xs:24},{default:l(()=>[e(n,{label:"任务类型",prop:"taskType"},{default:l(()=>[e(c,{clearable:"",modelValue:o(a).taskType,"onUpdate:modelValue":t[11]||(t[11]=r=>o(a).taskType=r),placeholder:"请选择任务类型",class:"ele-fluid","popper-options":{strategy:"fixed"}},{default:l(()=>[e(u,{value:"1",label:"私密"}),e(u,{value:"2",label:"公开"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(g,{header:"选择成员"},{default:l(()=>[s("div",{ref_key:"userTableWrapRef",ref:S,style:{overflow:"auto"},class:I(["user-table-wrap",{"is-ping-left":T.value},{"is-ping-right":$.value}]),onScroll:W},[e(K,{style:{"min-width":"580px","table-layout":"fixed"}},{default:l(()=>[t[19]||(t[19]=s("colgroup",null,[s("col",{width:"60px"}),s("col"),s("col"),s("col"),s("col",{width:"100px"})],-1)),t[20]||(t[20]=s("thead",null,[s("tr",null,[s("th",{style:{position:"sticky",left:"0","z-index":"98"},class:"user-table-index"}),s("th",null,"用户名"),s("th",null,"工号"),s("th",null,"所属部门"),s("th",{style:{textAlign:"center",position:"sticky",right:0,zIndex:98},class:"user-table-action"}," 操作 ")])],-1)),s("tbody",Be,[(V(!0),h(ce,null,_e(o(a).users,(r,k)=>(V(),h("tr",{key:r.key},[s("td",Ce,M(k+1),1),s("td",null,[e(n,{"label-width":"0px",prop:"users."+k+".name",rules:{required:!0,message:"请输入用户名",type:"string",trigger:"blur"},class:"pro-form-error-popper",style:{"margin-bottom":"0"}},{default:l(()=>[e(f,{clearable:"",modelValue:r.name,"onUpdate:modelValue":x=>r.name=x,placeholder:"请输入用户名"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"])]),s("td",null,[e(n,{"label-width":"0px",prop:"users."+k+".number",rules:{required:!0,message:"请输入工号",type:"string",trigger:"blur"},class:"pro-form-error-popper",style:{"margin-bottom":"0"}},{default:l(()=>[e(f,{clearable:"",modelValue:r.number,"onUpdate:modelValue":x=>r.number=x,placeholder:"请输入工号"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"])]),s("td",null,[e(n,{"label-width":"0px",prop:"users."+k+".department",rules:{required:!0,message:"请选择部门",type:"string",trigger:"change"},class:"pro-form-error-popper",style:{"margin-bottom":"0"}},{default:l(()=>[e(c,{clearable:"",modelValue:r.department,"onUpdate:modelValue":x=>r.department=x,placeholder:"请选择部门",class:"ele-fluid","popper-options":{strategy:"fixed"}},{default:l(()=>[e(u,{value:"研发部",label:"研发部"}),e(u,{value:"测试部",label:"测试部"}),e(u,{value:"产品部",label:"产品部"})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"])]),s("td",we,[e(j,{type:"danger",underline:!1,onClick:x=>O(r,k)},{default:l(()=>t[17]||(t[17]=[_(" 删除 ")])),_:2},1032,["onClick"])])]))),128)),!o(a).users||!o(a).users.length?(V(),h("tr",ze,[s("td",Ae,[e(m,{style:{padding:"4px 0"},type:"secondary"},{default:l(()=>t[18]||(t[18]=[_(" 暂无数据 ")])),_:1})])])):L("",!0)])]),_:1})],34),e(w,{icon:o(ve),style:{"margin-top":"16px",width:"100%"},onClick:N},{default:l(()=>t[21]||(t[21]=[s("span",{style:{"padding-top":"1px"}},"新增成员",-1)])),_:1},8,["icon"])]),_:1})]),_:1},8,["model","rules"])]),_:1}),e(G,{teleported:""},{extra:l(()=>[e(w,{type:"primary",loading:y.value,onClick:J},{default:l(()=>t[22]||(t[22]=[_(" 提交 ")])),_:1},8,["loading"])]),default:l(()=>[U.value?(V(),E(m,{key:0,type:"danger",icon:o(xe)},{default:l(()=>[s("span",null,M(U.value),1)]),_:1},8,["icon"])):L("",!0)]),_:1})]),_:1})}}}),He=Ve(De,[["__scopeId","data-v-bf373ceb"]]);export{He as default};
