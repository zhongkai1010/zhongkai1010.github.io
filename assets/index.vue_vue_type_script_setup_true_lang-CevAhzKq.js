import{dT as Pa,d as re,M as La,a0 as pe,a4 as Te,aq as W,p as M,o as v,a5 as J,c as B,b as Q,aN as ve,w as P,e as ce,a6 as L,F as oe,dk as Da,e5 as ta,cN as sa,E as me,aR as Ma,aT as Ia,O as na,J as y,q as de,h as Ie,t as te,a1 as Ne,aw as oa,cr as ia,fG as Ba,r as $,Q as za,cP as Be,ci as je,cj as Fa,cQ as We,fH as Ze,d1 as ge,a2 as ra,c4 as ie,d6 as Aa,fI as Ra,dm as Ee,dn as we,$ as Ha,a as ze,R as se,fJ as Oa,T as ca,fk as ua,U as ue,ce as da,fK as Ka,cd as z,fL as Ce,fM as pa,a9 as fa,dW as xa,cT as Ua,fN as Ye,fF as qa,cU as ja,cV as Wa,cY as Za,cZ as Ya,c_ as Ja,fO as Qa,d0 as Xa,c$ as Ga,b_ as el,fP as al,e3 as ll,c8 as ke,u,V as tl,c9 as Je,a7 as sl,aK as nl,cM as ol,da as il,l as Fe,d7 as Qe,dc as rl,fQ as cl,dh as ul,fR as dl,fS as pl,X as fl,m as hl,s as vl,a$ as ml,b0 as gl,aY as bl}from"./index-CrqWW_BJ.js";import{u as Xe,c as Ge}from"./arrays-DRUcygxz.js";var yl=1/0;function kl(e){var s=e==null?0:e.length;return s?Pa(e,yl):[]}var Cl=re({name:"NodeContent",setup(){return{ns:pe("cascader-node")}},render(){const{ns:e}=this,{node:s,panel:l}=this.$parent,{data:t,label:n}=s,{renderLabelFn:d}=l;return La("span",{class:e.e("label")},d?d({node:s,data:t}):n)}});const Re=Symbol(),Nl=re({name:"ElCascaderNode",components:{ElCheckbox:Ia,ElRadio:Ma,NodeContent:Cl,ElIcon:me,Check:sa,Loading:ta,ArrowRight:Da},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(e,{emit:s}){const l=na(Re),t=pe("cascader-node"),n=y(()=>l.isHoverMenu),d=y(()=>l.config.multiple),o=y(()=>l.config.checkStrictly),b=y(()=>{var E;return(E=l.checkedNodes[0])==null?void 0:E.uid}),p=y(()=>e.node.isDisabled),k=y(()=>e.node.isLeaf),f=y(()=>o.value&&!k.value||!p.value),h=y(()=>K(l.expandingNode)),g=y(()=>o.value&&l.checkedNodes.some(K)),K=E=>{var V;const{level:q,uid:ne}=e.node;return((V=E==null?void 0:E.pathNodes[q-1])==null?void 0:V.uid)===ne},F=()=>{h.value||l.expandNode(e.node)},_=E=>{const{node:V}=e;E!==V.checked&&l.handleCheckChange(V,E)},R=()=>{l.lazyLoad(e.node,()=>{k.value||F()})},H=E=>{n.value&&(Z(),!k.value&&s("expand",E))},Z=()=>{const{node:E}=e;!f.value||E.loading||(E.loaded?F():R())},I=()=>{n.value&&!k.value||(k.value&&!p.value&&!o.value&&!d.value?D(!0):Z())},Y=E=>{o.value?(_(E),e.node.loaded&&F()):D(E)},D=E=>{e.node.loaded?(_(E),!o.value&&F()):R()};return{panel:l,isHoverMenu:n,multiple:d,checkStrictly:o,checkedNodeId:b,isDisabled:p,isLeaf:k,expandable:f,inExpandingPath:h,inCheckedPath:g,ns:t,handleHoverExpand:H,handleExpand:Z,handleClick:I,handleCheck:D,handleSelectCheck:Y}}});function El(e,s,l,t,n,d){const o=W("el-checkbox"),b=W("el-radio"),p=W("check"),k=W("el-icon"),f=W("node-content"),h=W("loading"),g=W("arrow-right");return v(),M("li",{id:`${e.menuId}-${e.node.uid}`,role:"menuitem","aria-haspopup":!e.isLeaf,"aria-owns":e.isLeaf?null:e.menuId,"aria-expanded":e.inExpandingPath,tabindex:e.expandable?-1:void 0,class:L([e.ns.b(),e.ns.is("selectable",e.checkStrictly),e.ns.is("active",e.node.checked),e.ns.is("disabled",!e.expandable),e.inExpandingPath&&"in-active-path",e.inCheckedPath&&"in-checked-path"]),onMouseenter:e.handleHoverExpand,onFocus:e.handleHoverExpand,onClick:e.handleClick},[J(" prefix "),e.multiple?(v(),B(o,{key:0,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:e.isDisabled,onClick:ve(()=>{},["stop"]),"onUpdate:modelValue":e.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onClick","onUpdate:modelValue"])):e.checkStrictly?(v(),B(b,{key:1,"model-value":e.checkedNodeId,label:e.node.uid,disabled:e.isDisabled,"onUpdate:modelValue":e.handleSelectCheck,onClick:ve(()=>{},["stop"])},{default:P(()=>[J(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),ce("span")]),_:1},8,["model-value","label","disabled","onUpdate:modelValue","onClick"])):e.isLeaf&&e.node.checked?(v(),B(k,{key:2,class:L(e.ns.e("prefix"))},{default:P(()=>[Q(p)]),_:1},8,["class"])):J("v-if",!0),J(" content "),Q(f),J(" postfix "),e.isLeaf?J("v-if",!0):(v(),M(oe,{key:3},[e.node.loading?(v(),B(k,{key:0,class:L([e.ns.is("loading"),e.ns.e("postfix")])},{default:P(()=>[Q(h)]),_:1},8,["class"])):(v(),B(k,{key:1,class:L(["arrow-right",e.ns.e("postfix")])},{default:P(()=>[Q(g)]),_:1},8,["class"]))],64))],42,["id","aria-haspopup","aria-owns","aria-expanded","tabindex","onMouseenter","onFocus","onClick"])}var wl=Te(Nl,[["render",El],["__file","node.vue"]]);const Tl=re({name:"ElCascaderMenu",components:{Loading:ta,ElIcon:me,ElScrollbar:oa,ElCascaderNode:wl},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(e){const s=za(),l=pe("cascader-menu"),{t}=ia(),n=Ba();let d=null,o=null;const b=na(Re),p=$(null),k=y(()=>!e.nodes.length),f=y(()=>!b.initialLoaded),h=y(()=>`${n.value}-${e.index}`),g=R=>{d=R.target},K=R=>{if(!(!b.isHoverMenu||!d||!p.value))if(d.contains(R.target)){F();const H=s.vnode.el,{left:Z}=H.getBoundingClientRect(),{offsetWidth:I,offsetHeight:Y}=H,D=R.clientX-Z,E=d.offsetTop,V=E+d.offsetHeight;p.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${D} ${E} L${I} 0 V${E} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${D} ${V} L${I} ${Y} V${V} Z" />
        `}else o||(o=window.setTimeout(_,b.config.hoverThreshold))},F=()=>{o&&(clearTimeout(o),o=null)},_=()=>{p.value&&(p.value.innerHTML="",F())};return{ns:l,panel:b,hoverZone:p,isEmpty:k,isLoading:f,menuId:h,t,handleExpand:g,handleMouseMove:K,clearHoverZone:_}}});function Sl(e,s,l,t,n,d){const o=W("el-cascader-node"),b=W("loading"),p=W("el-icon"),k=W("el-scrollbar");return v(),B(k,{key:e.menuId,tag:"ul",role:"menu",class:L(e.ns.b()),"wrap-class":e.ns.e("wrap"),"view-class":[e.ns.e("list"),e.ns.is("empty",e.isEmpty)],onMousemove:e.handleMouseMove,onMouseleave:e.clearHoverZone},{default:P(()=>{var f;return[(v(!0),M(oe,null,de(e.nodes,h=>(v(),B(o,{key:h.uid,node:h,"menu-id":e.menuId,onExpand:e.handleExpand},null,8,["node","menu-id","onExpand"]))),128)),e.isLoading?(v(),M("div",{key:0,class:L(e.ns.e("empty-text"))},[Q(p,{size:"14",class:L(e.ns.is("loading"))},{default:P(()=>[Q(b)]),_:1},8,["class"]),Ie(" "+te(e.t("el.cascader.loading")),1)],2)):e.isEmpty?(v(),M("div",{key:1,class:L(e.ns.e("empty-text"))},[Ne(e.$slots,"empty",{},()=>[Ie(te(e.t("el.cascader.noData")),1)])],2)):(f=e.panel)!=null&&f.isHoverMenu?(v(),M("svg",{key:2,ref:"hoverZone",class:L(e.ns.e("hover-zone"))},null,2)):J("v-if",!0)]}),_:3},8,["class","wrap-class","view-class","onMousemove","onMouseleave"])}var $l=Te(Tl,[["render",Sl],["__file","menu.vue"]]);let _l=0;const Vl=e=>{const s=[e];let{parent:l}=e;for(;l;)s.unshift(l),l=l.parent;return s};class fe{constructor(s,l,t,n=!1){this.data=s,this.config=l,this.parent=t,this.root=n,this.uid=_l++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:d,label:o,children:b}=l,p=s[b],k=Vl(this);this.level=n?0:t?t.level+1:1,this.value=s[d],this.label=s[o],this.pathNodes=k,this.pathValues=k.map(f=>f.value),this.pathLabels=k.map(f=>f.label),this.childrenData=p,this.children=(p||[]).map(f=>new fe(f,l,this)),this.loaded=!l.lazy||this.isLeaf||!Be(p)}get isDisabled(){const{data:s,parent:l,config:t}=this,{disabled:n,checkStrictly:d}=t;return(je(n)?n(s,this):!!s[n])||!d&&(l==null?void 0:l.isDisabled)}get isLeaf(){const{data:s,config:l,childrenData:t,loaded:n}=this,{lazy:d,leaf:o}=l,b=je(o)?o(s,this):s[o];return Fa(b)?d&&!n?!1:!(We(t)&&t.length):!!b}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(s){const{childrenData:l,children:t}=this,n=new fe(s,this.config,this);return We(l)?l.push(s):this.childrenData=[s],t.push(n),n}calcText(s,l){const t=s?this.pathLabels.join(l):this.label;return this.text=t,t}broadcast(s,...l){const t=`onParent${Ze(s)}`;this.children.forEach(n=>{n&&(n.broadcast(s,...l),n[t]&&n[t](...l))})}emit(s,...l){const{parent:t}=this,n=`onChild${Ze(s)}`;t&&(t[n]&&t[n](...l),t.emit(s,...l))}onParentCheck(s){this.isDisabled||this.setCheckState(s)}onChildCheck(){const{children:s}=this,l=s.filter(n=>!n.isDisabled),t=l.length?l.every(n=>n.checked):!1;this.setCheckState(t)}setCheckState(s){const l=this.children.length,t=this.children.reduce((n,d)=>{const o=d.checked?1:d.indeterminate?.5:0;return n+o},0);this.checked=this.loaded&&this.children.filter(n=>!n.isDisabled).every(n=>n.loaded&&n.checked)&&s,this.indeterminate=this.loaded&&t!==l&&t>0}doCheck(s){if(this.checked===s)return;const{checkStrictly:l,multiple:t}=this.config;l||!t?this.checked=s:(this.broadcast("check",s),this.setCheckState(s),this.emit("check"))}}const Ae=(e,s)=>e.reduce((l,t)=>(t.isLeaf?l.push(t):(!s&&l.push(t),l=l.concat(Ae(t.children,s))),l),[]);class ea{constructor(s,l){this.config=l;const t=(s||[]).map(n=>new fe(n,this.config));this.nodes=t,this.allNodes=Ae(t,!1),this.leafNodes=Ae(t,!0)}getNodes(){return this.nodes}getFlattedNodes(s){return s?this.leafNodes:this.allNodes}appendNode(s,l){const t=l?l.appendChild(s):new fe(s,this.config);l||this.nodes.push(t),this.allNodes.push(t),t.isLeaf&&this.leafNodes.push(t)}appendNodes(s,l){s.forEach(t=>this.appendNode(t,l))}getNodeByValue(s,l=!1){return!s&&s!==0?null:this.getFlattedNodes(l).find(n=>ge(n.value,s)||ge(n.pathValues,s))||null}getSameNode(s){return s&&this.getFlattedNodes(!1).find(({value:t,level:n})=>ge(s.value,t)&&s.level===n)||null}}const ha=ra({modelValue:{type:ie([Number,String,Array])},options:{type:ie(Array),default:()=>[]},props:{type:ie(Object),default:()=>({})}}),Pl={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:Aa,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},Ll=e=>y(()=>({...Pl,...e.props})),aa=e=>{if(!e)return 0;const s=e.id.split("-");return Number(s[s.length-2])},Dl=e=>{if(!e)return;const s=e.querySelector("input");s?s.click():Ra(e)&&e.click()},Ml=(e,s)=>{const l=s.slice(0),t=l.map(d=>d.uid),n=e.reduce((d,o)=>{const b=t.indexOf(o.uid);return b>-1&&(d.push(o),l.splice(b,1),t.splice(b,1)),d},[]);return n.push(...l),n},Il=re({name:"ElCascaderPanel",components:{ElCascaderMenu:$l},props:{...ha,border:{type:Boolean,default:!0},renderLabel:Function},emits:[Ee,we,"close","expand-change"],setup(e,{emit:s,slots:l}){let t=!1;const n=pe("cascader"),d=Ll(e);let o=null;const b=$(!0),p=$([]),k=$(null),f=$([]),h=$(null),g=$([]),K=y(()=>d.value.expandTrigger==="hover"),F=y(()=>e.renderLabel||l.default),_=()=>{const{options:c}=e,m=d.value;t=!1,o=new ea(c,m),f.value=[o.getNodes()],m.lazy&&Be(e.options)?(b.value=!1,R(void 0,N=>{N&&(o=new ea(N,m),f.value=[o.getNodes()]),b.value=!0,q(!1,!0)})):q(!1,!0)},R=(c,m)=>{const N=d.value;c=c||new fe({},N,void 0,!0),c.loading=!0;const C=w=>{const S=c,O=S.root?null:S;w&&(o==null||o.appendNodes(w,O)),S.loading=!1,S.loaded=!0,S.childrenData=S.childrenData||[],m&&m(w)};N.lazyLoad(c,C)},H=(c,m)=>{var N;const{level:C}=c,w=f.value.slice(0,C);let S;c.isLeaf?S=c.pathNodes[C-2]:(S=c,w.push(c.children)),((N=h.value)==null?void 0:N.uid)!==(S==null?void 0:S.uid)&&(h.value=c,f.value=w,!m&&s("expand-change",(c==null?void 0:c.pathValues)||[]))},Z=(c,m,N=!0)=>{const{checkStrictly:C,multiple:w}=d.value,S=g.value[0];t=!0,!w&&(S==null||S.doCheck(!1)),c.doCheck(m),V(),N&&!w&&!C&&s("close"),!N&&!w&&!C&&I(c)},I=c=>{c&&(c=c.parent,I(c),c&&H(c))},Y=c=>o==null?void 0:o.getFlattedNodes(c),D=c=>{var m;return(m=Y(c))==null?void 0:m.filter(N=>N.checked!==!1)},E=()=>{g.value.forEach(c=>c.doCheck(!1)),V(),f.value=f.value.slice(0,1),h.value=null,s("expand-change",[])},V=()=>{var c;const{checkStrictly:m,multiple:N}=d.value,C=g.value,w=D(!m),S=Ml(C,w),O=S.map(A=>A.valueByOption);g.value=S,k.value=N?O:(c=O[0])!=null?c:null},q=(c=!1,m=!1)=>{const{modelValue:N}=e,{lazy:C,multiple:w,checkStrictly:S}=d.value,O=!S;if(!(!b.value||t||!m&&ge(N,k.value)))if(C&&!c){const x=Xe(kl(Ge(N))).map(j=>o==null?void 0:o.getNodeByValue(j)).filter(j=>!!j&&!j.loaded&&!j.loading);x.length?x.forEach(j=>{R(j,()=>q(!1,m))}):q(!0,m)}else{const A=w?Ge(N):[N],x=Xe(A.map(j=>o==null?void 0:o.getNodeByValue(j,O)));ne(x,m),k.value=ua(N)}},ne=(c,m=!0)=>{const{checkStrictly:N}=d.value,C=g.value,w=c.filter(A=>!!A&&(N||A.isLeaf)),S=o==null?void 0:o.getSameNode(h.value),O=m&&S||w[0];O?O.pathNodes.forEach(A=>H(A,!0)):h.value=null,C.forEach(A=>A.doCheck(!1)),ze(w).forEach(A=>A.doCheck(!0)),g.value=w,ue(X)},X=()=>{da&&p.value.forEach(c=>{const m=c==null?void 0:c.$el;if(m){const N=m.querySelector(`.${n.namespace.value}-scrollbar__wrap`),C=m.querySelector(`.${n.b("node")}.${n.is("active")}`)||m.querySelector(`.${n.b("node")}.in-active-path`);Ka(N,C)}})},ee=c=>{const m=c.target,{code:N}=c;switch(N){case z.up:case z.down:{c.preventDefault();const C=N===z.up?-1:1;Ce(pa(m,C,`.${n.b("node")}[tabindex="-1"]`));break}case z.left:{c.preventDefault();const C=p.value[aa(m)-1],w=C==null?void 0:C.$el.querySelector(`.${n.b("node")}[aria-expanded="true"]`);Ce(w);break}case z.right:{c.preventDefault();const C=p.value[aa(m)+1],w=C==null?void 0:C.$el.querySelector(`.${n.b("node")}[tabindex="-1"]`);Ce(w);break}case z.enter:case z.numpadEnter:Dl(m);break}};return Ha(Re,ze({config:d,expandingNode:h,checkedNodes:g,isHoverMenu:K,initialLoaded:b,renderLabelFn:F,lazyLoad:R,expandNode:H,handleCheckChange:Z})),se([d,()=>e.options],_,{deep:!0,immediate:!0}),se(()=>e.modelValue,()=>{t=!1,q()},{deep:!0}),se(()=>k.value,c=>{ge(c,e.modelValue)||(s(Ee,c),s(we,c))}),Oa(()=>p.value=[]),ca(()=>!Be(e.modelValue)&&q()),{ns:n,menuList:p,menus:f,checkedNodes:g,handleKeyDown:ee,handleCheckChange:Z,getFlattedNodes:Y,getCheckedNodes:D,clearCheckedNodes:E,calculateCheckedValue:V,scrollToExpandingNode:X}}});function Bl(e,s,l,t,n,d){const o=W("el-cascader-menu");return v(),M("div",{class:L([e.ns.b("panel"),e.ns.is("bordered",e.border)]),onKeydown:e.handleKeyDown},[(v(!0),M(oe,null,de(e.menus,(b,p)=>(v(),B(o,{key:p,ref_for:!0,ref:k=>e.menuList[p]=k,index:p,nodes:[...b]},{empty:P(()=>[Ne(e.$slots,"empty")]),_:2},1032,["index","nodes"]))),128))],42,["onKeydown"])}var zl=Te(Il,[["render",Bl],["__file","index.vue"]]);const Fl=fa(zl),Al=ra({...ha,size:Wa,placeholder:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:ie(Function),default:(e,s)=>e.text.includes(s)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,maxCollapseTags:{type:Number,default:1},collapseTagsTooltip:{type:Boolean,default:!1},debounce:{type:Number,default:300},beforeFilter:{type:ie(Function),default:()=>!0},placement:{type:ie(String),values:ja,default:"bottom-start"},fallbackPlacements:{type:ie(Array),default:["bottom-start","bottom","top-start","top","right","left"]},popperClass:{type:String,default:""},teleported:qa.teleported,tagType:{...Ye.type,default:"info"},tagEffect:{...Ye.effect,default:"light"},validateEvent:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},...Ua}),Rl={[Ee]:e=>!0,[we]:e=>!0,focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,visibleChange:e=>xa(e),expandChange:e=>!!e,removeTag:e=>!!e},Hl="ElCascader",Ol=re({name:Hl}),Kl=re({...Ol,props:Al,emits:Rl,setup(e,{expose:s,emit:l}){const t=e,n={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:a})=>{const{modifiersData:i,placement:r}=a;["right","left","bottom","top"].includes(r)||(i.arrow.x=35)},requires:["arrow"]}]},d=Za();let o=0,b=0;const p=pe("cascader"),k=pe("input"),{t:f}=ia(),{form:h,formItem:g}=Ya(),{valueOnClear:K}=Ja(t),{isComposing:F,handleComposition:_}=Qa({afterComposition(a){var i;const r=(i=a.target)==null?void 0:i.value;De(r)}}),R=$(null),H=$(null),Z=$(null),I=$(null),Y=$(null),D=$(!1),E=$(!1),V=$(!1),q=$(!1),ne=$(""),X=$(""),ee=$([]),c=$([]),m=$([]),N=y(()=>d.style),C=y(()=>t.disabled||(h==null?void 0:h.disabled)),w=y(()=>t.placeholder||f("el.cascader.placeholder")),S=y(()=>X.value||ee.value.length>0||F.value?"":w.value),O=Xa(),A=y(()=>O.value==="small"?"small":"default"),x=y(()=>!!t.props.multiple),j=y(()=>!t.filterable||x.value),He=y(()=>x.value?X.value:ne.value),be=y(()=>{var a;return((a=I.value)==null?void 0:a.checkedNodes)||[]}),va=y(()=>!t.clearable||C.value||V.value||!E.value?!1:!!be.value.length),ye=y(()=>{const{showAllLevels:a,separator:i}=t,r=be.value;return r.length?x.value?"":r[0].calcText(a,i):""}),ma=y(()=>(g==null?void 0:g.validateState)||""),Se=y({get(){return ua(t.modelValue)},set(a){const i=a!=null?a:K.value;l(Ee,i),l(we,i),t.validateEvent&&(g==null||g.validate("change").catch(r=>Ga()))}}),ga=y(()=>[p.b(),p.m(O.value),p.is("disabled",C.value),d.class]),ba=y(()=>[k.e("icon"),"icon-arrow-down",p.is("reverse",D.value)]),ya=y(()=>p.is("focus",D.value||q.value)),Oe=y(()=>{var a,i;return(i=(a=R.value)==null?void 0:a.popperRef)==null?void 0:i.contentRef}),U=a=>{var i,r,T;C.value||(a=a!=null?a:!D.value,a!==D.value&&(D.value=a,(r=(i=H.value)==null?void 0:i.input)==null||r.setAttribute("aria-expanded",`${a}`),a?(he(),ue((T=I.value)==null?void 0:T.scrollToExpandingNode)):t.filterable&&Le(),l("visibleChange",a)))},he=()=>{ue(()=>{var a;(a=R.value)==null||a.updatePopper()})},$e=()=>{V.value=!1},_e=a=>{const{showAllLevels:i,separator:r}=t;return{node:a,key:a.uid,text:a.calcText(i,r),hitState:!1,closable:!C.value&&!a.isDisabled,isCollapseTag:!1}},Ve=a=>{var i;const r=a.node;r.doCheck(!1),(i=I.value)==null||i.calculateCheckedValue(),l("removeTag",r.valueByOption)},ka=()=>{if(!x.value)return;const a=be.value,i=[],r=[];if(a.forEach(T=>r.push(_e(T))),c.value=r,a.length){a.slice(0,t.maxCollapseTags).forEach(G=>i.push(_e(G)));const T=a.slice(t.maxCollapseTags),ae=T.length;ae&&(t.collapseTags?i.push({key:-1,text:`+ ${ae}`,closable:!1,isCollapseTag:!0}):T.forEach(G=>i.push(_e(G))))}ee.value=i},Ke=()=>{var a,i;const{filterMethod:r,showAllLevels:T,separator:ae}=t,G=(i=(a=I.value)==null?void 0:a.getFlattedNodes(!t.props.checkStrictly))==null?void 0:i.filter(le=>le.isDisabled?!1:(le.calcText(T,ae),r(le,He.value)));x.value&&(ee.value.forEach(le=>{le.hitState=!1}),c.value.forEach(le=>{le.hitState=!1})),V.value=!0,m.value=G,he()},Ca=()=>{var a;let i;V.value&&Y.value?i=Y.value.$el.querySelector(`.${p.e("suggestion-item")}`):i=(a=I.value)==null?void 0:a.$el.querySelector(`.${p.b("node")}[tabindex="-1"]`),i&&(i.focus(),!V.value&&i.click())},Pe=()=>{var a,i;const r=(a=H.value)==null?void 0:a.input,T=Z.value,ae=(i=Y.value)==null?void 0:i.$el;if(!(!da||!r)){if(ae){const G=ae.querySelector(`.${p.e("suggestion-list")}`);G.style.minWidth=`${r.offsetWidth}px`}if(T){const{offsetHeight:G}=T,le=ee.value.length>0?`${Math.max(G,o)-2}px`:`${o}px`;r.style.height=le,he()}}},Na=a=>{var i;return(i=I.value)==null?void 0:i.getCheckedNodes(a)},Ea=a=>{he(),l("expandChange",a)},wa=a=>{if(!F.value)switch(a.code){case z.enter:case z.numpadEnter:U();break;case z.down:U(!0),ue(Ca),a.preventDefault();break;case z.esc:D.value===!0&&(a.preventDefault(),a.stopPropagation(),U(!1));break;case z.tab:U(!1);break}},Ta=()=>{var a;(a=I.value)==null||a.clearCheckedNodes(),!D.value&&t.filterable&&Le(),U(!1),l("clear")},Le=()=>{const{value:a}=ye;ne.value=a,X.value=a},Sa=a=>{var i,r;const{checked:T}=a;x.value?(i=I.value)==null||i.handleCheckChange(a,!T,!1):(!T&&((r=I.value)==null||r.handleCheckChange(a,!0,!1)),U(!1))},$a=a=>{const i=a.target,{code:r}=a;switch(r){case z.up:case z.down:{const T=r===z.up?-1:1;Ce(pa(i,T,`.${p.e("suggestion-item")}[tabindex="-1"]`));break}case z.enter:case z.numpadEnter:i.click();break}},_a=()=>{const a=ee.value,i=a[a.length-1];b=X.value?0:b+1,!(!i||!b||t.collapseTags&&a.length>1)&&(i.hitState?Ve(i):i.hitState=!0)},xe=a=>{const i=a.target,r=p.e("search-input");i.className===r&&(q.value=!0),l("focus",a)},Ue=a=>{q.value=!1,l("blur",a)},Va=el(()=>{const{value:a}=He;if(!a)return;const i=t.beforeFilter(a);al(i)?i.then(Ke).catch(()=>{}):i!==!1?Ke():$e()},t.debounce),De=(a,i)=>{!D.value&&U(!0),!(i!=null&&i.isComposing)&&(a?Va():$e())},qe=a=>Number.parseFloat(dl(k.cssVarName("input-height"),a).value)-2;return se(V,he),se([be,C,()=>t.collapseTags],ka),se(ee,()=>{ue(()=>Pe())}),se(O,async()=>{await ue();const a=H.value.input;o=qe(a)||o,Pe()}),se(ye,Le,{immediate:!0}),ca(()=>{const a=H.value.input,i=qe(a);o=a.offsetHeight||i,ll(a,Pe)}),s({getCheckedNodes:Na,cascaderPanelRef:I,togglePopperVisible:U,contentRef:Oe,presentText:ye}),(a,i)=>(v(),B(u(Qe),{ref_key:"tooltipRef",ref:R,visible:D.value,teleported:a.teleported,"popper-class":[u(p).e("dropdown"),a.popperClass],"popper-options":n,"fallback-placements":a.fallbackPlacements,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:a.placement,transition:`${u(p).namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:a.persistent,onHide:$e},{default:P(()=>[ke((v(),M("div",{class:L(u(ga)),style:sl(u(N)),onClick:()=>U(u(j)?void 0:!0),onKeydown:wa,onMouseenter:r=>E.value=!0,onMouseleave:r=>E.value=!1},[Q(u(nl),{ref_key:"input",ref:H,modelValue:ne.value,"onUpdate:modelValue":r=>ne.value=r,placeholder:u(S),readonly:u(j),disabled:u(C),"validate-event":!1,size:u(O),class:L(u(ya)),tabindex:u(x)&&a.filterable&&!u(C)?-1:void 0,onCompositionstart:u(_),onCompositionupdate:u(_),onCompositionend:u(_),onFocus:xe,onBlur:Ue,onInput:De},{suffix:P(()=>[u(va)?(v(),B(u(me),{key:"clear",class:L([u(k).e("icon"),"icon-circle-close"]),onClick:ve(Ta,["stop"])},{default:P(()=>[Q(u(ol))]),_:1},8,["class","onClick"])):(v(),B(u(me),{key:"arrow-down",class:L(u(ba)),onClick:ve(r=>U(),["stop"])},{default:P(()=>[Q(u(il))]),_:1},8,["class","onClick"]))]),_:1},8,["modelValue","onUpdate:modelValue","placeholder","readonly","disabled","size","class","tabindex","onCompositionstart","onCompositionupdate","onCompositionend"]),u(x)?(v(),M("div",{key:0,ref_key:"tagWrapper",ref:Z,class:L([u(p).e("tags"),u(p).is("validate",!!u(ma))])},[(v(!0),M(oe,null,de(ee.value,r=>(v(),B(u(Fe),{key:r.key,type:a.tagType,size:u(A),effect:a.tagEffect,hit:r.hitState,closable:r.closable,"disable-transitions":"",onClose:T=>Ve(r)},{default:P(()=>[r.isCollapseTag===!1?(v(),M("span",{key:0},te(r.text),1)):(v(),B(u(Qe),{key:1,disabled:D.value||!a.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:P(()=>[ce("span",null,te(r.text),1)]),content:P(()=>[ce("div",{class:L(u(p).e("collapse-tags"))},[(v(!0),M(oe,null,de(c.value.slice(a.maxCollapseTags),(T,ae)=>(v(),M("div",{key:ae,class:L(u(p).e("collapse-tag"))},[(v(),B(u(Fe),{key:T.key,class:"in-tooltip",type:a.tagType,size:u(A),effect:a.tagEffect,hit:T.hitState,closable:T.closable,"disable-transitions":"",onClose:G=>Ve(T)},{default:P(()=>[ce("span",null,te(T.text),1)]),_:2},1032,["type","size","effect","hit","closable","onClose"]))],2))),128))],2)]),_:2},1032,["disabled"]))]),_:2},1032,["type","size","effect","hit","closable","onClose"]))),128)),a.filterable&&!u(C)?ke((v(),M("input",{key:0,"onUpdate:modelValue":r=>X.value=r,type:"text",class:L(u(p).e("search-input")),placeholder:u(ye)?"":u(w),onInput:r=>De(X.value,r),onClick:ve(r=>U(!0),["stop"]),onKeydown:rl(_a,["delete"]),onCompositionstart:u(_),onCompositionupdate:u(_),onCompositionend:u(_),onFocus:xe,onBlur:Ue},null,42,["onUpdate:modelValue","placeholder","onInput","onClick","onKeydown","onCompositionstart","onCompositionupdate","onCompositionend"])),[[cl,X.value]]):J("v-if",!0)],2)):J("v-if",!0)],46,["onClick","onMouseenter","onMouseleave"])),[[u(ul),()=>U(!1),u(Oe)]])]),content:P(()=>[ke(Q(u(Fl),{ref_key:"cascaderPanelRef",ref:I,modelValue:u(Se),"onUpdate:modelValue":r=>tl(Se)?Se.value=r:null,options:a.options,props:t.props,border:!1,"render-label":a.$slots.default,onExpandChange:Ea,onClose:r=>a.$nextTick(()=>U(!1))},{empty:P(()=>[Ne(a.$slots,"empty")]),_:3},8,["modelValue","onUpdate:modelValue","options","props","render-label","onClose"]),[[Je,!V.value]]),a.filterable?ke((v(),B(u(oa),{key:0,ref_key:"suggestionPanel",ref:Y,tag:"ul",class:L(u(p).e("suggestion-panel")),"view-class":u(p).e("suggestion-list"),onKeydown:$a},{default:P(()=>[m.value.length?(v(!0),M(oe,{key:0},de(m.value,r=>(v(),M("li",{key:r.uid,class:L([u(p).e("suggestion-item"),u(p).is("checked",r.checked)]),tabindex:-1,onClick:T=>Sa(r)},[ce("span",null,te(r.text),1),r.checked?(v(),B(u(me),{key:0},{default:P(()=>[Q(u(sa))]),_:1})):J("v-if",!0)],10,["onClick"]))),128)):Ne(a.$slots,"empty",{key:1},()=>[ce("li",{class:L(u(p).e("empty-text"))},te(u(f)("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class"])),[[Je,V.value]]):J("v-if",!0)]),_:3},8,["visible","teleported","popper-class","fallback-placements","placement","transition","persistent"]))}});var xl=Te(Kl,[["__file","cascader.vue"]]);const Ul=fa(xl),ql="/",jl=pl("regions",{state:()=>({regionsData:null}),actions:{setRegionsData(e){this.regionsData=e}}});function Wl(){const e=jl(),{regionsData:s}=fl(e);return s.value==null&&(e.setRegionsData([]),Zl().then(l=>{e.setRegionsData(l)}).catch(l=>{hl.error(l.message)})),s}async function Zl(){var s;return(s=(await vl.get(ql+"json/regions-data.json",{baseURL:""})).data)!=null?s:[]}function Me(e,s){return s==="label"?e.map(l=>{const t={label:l.label,value:l.label};return l.children&&(t.children=l.children.map(n=>{const d={label:n.label,value:n.label};return n.children&&(d.children=n.children.map(o=>({label:o.label,value:o.label}))),d})),t}):e}function Yl(e,s,l){return Me(s==="provinceCity"?e.map(t=>{const n={label:t.label,value:t.value};return t.children&&(n.children=t.children.map(d=>({label:d.label,value:d.value}))),n}):s==="province"?e.map(t=>({label:t.label,value:t.value})):e,l)}function la(e,s){const l=[];return e&&e.length&&s&&s.forEach(t=>{t.value===e[0]&&(l.push(t.label),t.children&&t.children.length&&t.children.forEach(n=>{n.value===e[1]&&l.push(n.label),n.children&&n.children.length&&n.children.forEach(d=>{d.value===e[2]&&l.push(d.label)})}))}),l}const Jl={key:0},Gl=re({name:"RegionsSelect",__name:"index",props:ml({options:{},valueField:{},type:{},multiple:{type:Boolean},component:{},placeholder:{},disabled:{type:Boolean},clearable:{type:Boolean,default:!0},filterable:{type:Boolean,default:!0},cascaderProps:{},collapseTags:{type:Boolean,default:!0},maxCollapseTags:{default:5},collapseTagsTooltip:{type:Boolean},showAllLevels:{type:Boolean,default:!0},separator:{},teleported:{type:Boolean,default:!0},size:{}},{modelValue:{type:Array},modelModifiers:{}}),emits:["update:modelValue"],setup(e,{expose:s}){var k;const l=e,t=gl(e,"modelValue"),n=Wl(),d=$(null),o=ze({...l.cascaderProps||{},multiple:l.multiple||!!((k=l.cascaderProps)!=null&&k.multiple)}),b=y(()=>{var h,g;const f=(g=(h=l.options)!=null?h:n.value)!=null?g:[];return Yl(f,l.type,l.valueField)}),p=y(()=>{const f=" / ",h=t.value;if(h&&h.length&&Array.isArray(h[0])){const K=[];return h.forEach(F=>{const _=la(F,b.value);K.push(_.join(f))}),K}return la(h,b.value).join(f)});return se(()=>l.cascaderProps,f=>{const h=f||{};["expandTrigger","checkStrictly","emitPath","lazy","lazyLoad","value","label","children","disabled","leaf","hoverThreshold"].forEach(g=>{o[g]==null&&h[g]==null||o[g]!==h[g]&&(o[g]=h[g])}),l.multiple?o.multiple||(o.multiple=!0):!!o.multiple!=!!h.multiple&&(o.multiple=h.multiple)},{immediate:!0,deep:!0}),s({cascaderRef:d,getCheckedNodes:f=>{var h,g;return(g=(h=d.value)==null?void 0:h.getCheckedNodes)==null?void 0:g.call(h,!!f)}}),(f,h)=>{const g=Fe,K=bl,F=Ul;return f.component==="text"?(v(),M(oe,{key:0},[typeof p.value=="string"?(v(),M("span",Jl,te(p.value),1)):(v(),B(K,{key:1,wrap:!0},{default:P(()=>[(v(!0),M(oe,null,de(p.value,_=>(v(),B(g,{key:_,"disable-transitions":!0,size:"small",type:"info"},{default:P(()=>[Ie(te(_),1)]),_:2},1024))),128))]),_:1}))],64)):(v(),B(F,{key:1,ref_key:"cascaderRef",ref:d,size:f.size,disabled:f.disabled,clearable:f.clearable,modelValue:t.value,"onUpdate:modelValue":h[0]||(h[0]=_=>t.value=_),options:b.value,filterable:f.filterable,placeholder:f.placeholder,props:o,"popper-class":"ele-popper-higher","collapse-tags":f.collapseTags,"max-collapse-tags":f.maxCollapseTags,"collapse-tags-tooltip":f.collapseTagsTooltip,showAllLevels:f.showAllLevels,separator:f.separator,teleported:f.teleported,class:"ele-fluid"},null,8,["size","disabled","clearable","modelValue","options","filterable","placeholder","props","collapse-tags","max-collapse-tags","collapse-tags-tooltip","showAllLevels","separator","teleported"]))}}});export{Ul as E,Gl as _,Rl as a,Al as c};
