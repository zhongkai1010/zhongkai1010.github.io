import{r as E,a as U,ev as q,d as T,P as F,c5 as G,M as f,w as z,c8 as S,b as H,c9 as P,cb as J,e1 as C,ce as K,U as O,cf as _,d8 as b,e2 as L,cI as j,V as Y,ew as Z,J as Q,u as W,c as X,o as k,a1 as B,a5 as h,p as V,a6 as A,a7 as I,e as p,t as ee,ex as le}from"./index-BHMAnI5P.js";function te(t){let e;const n=E(!1),l=U({...t,originalPosition:"",originalOverflow:"",visible:!1});function a(s){l.text=s}function o(){const s=l.parent,r=c.ns;if(!s.vLoadingAddClassList){let d=s.getAttribute("loading-number");d=Number.parseInt(d)-1,d?s.setAttribute("loading-number",d.toString()):(C(s,r.bm("parent","relative")),s.removeAttribute("loading-number")),C(s,r.bm("parent","hidden"))}i(),m.unmount()}function i(){var s,r;(r=(s=c.$el)==null?void 0:s.parentNode)==null||r.removeChild(c.$el)}function v(){var s;t.beforeClose&&!t.beforeClose()||(n.value=!0,clearTimeout(e),e=setTimeout(g,400),l.visible=!1,(s=t.closed)==null||s.call(t))}function g(){if(!n.value)return;const s=l.parent;n.value=!1,s.vLoadingAddClassList=void 0,o()}const u=T({name:"ElLoading",setup(s,{expose:r}){const{ns:d,zIndex:R}=G("loading");return r({ns:d,zIndex:R}),()=>{const w=l.spinner||l.svg,D=f("svg",{class:"circular",viewBox:l.svgViewBox?l.svgViewBox:"0 0 50 50",...w?{innerHTML:w}:{}},[f("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})]),M=l.text?f("p",{class:d.b("text")},[l.text]):void 0;return f(J,{name:d.b("fade"),onAfterLeave:g},{default:z(()=>[S(H("div",{style:{backgroundColor:l.background||""},class:[d.b("mask"),l.customClass,l.fullscreen?"is-fullscreen":""]},[f("div",{class:d.b("spinner")},[D,M])]),[[P,l.visible]])])})}}}),m=q(u),c=m.mount(document.createElement("div"));return{...F(l),setText:a,removeElLoadingChild:i,close:v,handleAfterLeave:g,vm:c,get $el(){return c.$el}}}let y;const ne=function(t={}){if(!K)return;const e=se(t);if(e.fullscreen&&y)return y;const n=te({...e,closed:()=>{var a;(a=e.closed)==null||a.call(e),e.fullscreen&&(y=void 0)}});oe(e,e.parent,n),$(e,e.parent,n),e.parent.vLoadingAddClassList=()=>$(e,e.parent,n);let l=e.parent.getAttribute("loading-number");return l?l=`${Number.parseInt(l)+1}`:l="1",e.parent.setAttribute("loading-number",l),e.parent.appendChild(n.$el),O(()=>n.visible.value=e.visible),e.fullscreen&&(y=n),n},se=t=>{var e,n,l,a;let o;return _(t.target)?o=(e=document.querySelector(t.target))!=null?e:document.body:o=t.target||document.body,{parent:o===document.body||t.body?document.body:o,background:t.background||"",svg:t.svg||"",svgViewBox:t.svgViewBox||"",spinner:t.spinner||!1,text:t.text||"",fullscreen:o===document.body&&((n=t.fullscreen)!=null?n:!0),lock:(l=t.lock)!=null?l:!1,customClass:t.customClass||"",visible:(a=t.visible)!=null?a:!0,beforeClose:t.beforeClose,closed:t.closed,target:o}},oe=async(t,e,n)=>{const{nextZIndex:l}=n.vm.zIndex||n.vm._.exposed.zIndex,a={};if(t.fullscreen)n.originalPosition.value=b(document.body,"position"),n.originalOverflow.value=b(document.body,"overflow"),a.zIndex=l();else if(t.parent===document.body){n.originalPosition.value=b(document.body,"position"),await O();for(const o of["top","left"]){const i=o==="top"?"scrollTop":"scrollLeft";a[o]=`${t.target.getBoundingClientRect()[o]+document.body[i]+document.documentElement[i]-Number.parseInt(b(document.body,`margin-${o}`),10)}px`}for(const o of["height","width"])a[o]=`${t.target.getBoundingClientRect()[o]}px`}else n.originalPosition.value=b(e,"position");for(const[o,i]of Object.entries(a))n.$el.style[o]=i},$=(t,e,n)=>{const l=n.vm.ns||n.vm._.exposed.ns;["absolute","fixed","sticky"].includes(n.originalPosition.value)?C(e,l.bm("parent","relative")):L(e,l.bm("parent","relative")),t.fullscreen&&t.lock?L(e,l.bm("parent","hidden")):C(e,l.bm("parent","hidden"))},x=Symbol("ElLoading"),N=(t,e)=>{var n,l,a,o;const i=e.instance,v=s=>j(e.value)?e.value[s]:void 0,g=s=>{const r=_(s)&&(i==null?void 0:i[s])||s;return r&&E(r)},u=s=>g(v(s)||t.getAttribute(`element-loading-${Z(s)}`)),m=(n=v("fullscreen"))!=null?n:e.modifiers.fullscreen,c={text:u("text"),svg:u("svg"),svgViewBox:u("svgViewBox"),spinner:u("spinner"),background:u("background"),customClass:u("customClass"),fullscreen:m,target:(l=v("target"))!=null?l:m?void 0:t,body:(a=v("body"))!=null?a:e.modifiers.body,lock:(o=v("lock"))!=null?o:e.modifiers.lock};t[x]={options:c,instance:ne(c)}},ae=(t,e)=>{for(const n of Object.keys(e))Y(e[n])&&(e[n].value=t[n])},re={mounted(t,e){e.value&&N(t,e)},updated(t,e){const n=t[x];e.oldValue!==e.value&&(e.value&&!e.oldValue?N(t,e):e.value&&e.oldValue?j(e.value)&&ae(e.value,n.options):n==null||n.instance.close())},unmounted(t){var e;(e=t[x])==null||e.instance.close(),t[x]=null}},ie={loading:Boolean,text:String,background:String,spinner:String,svgViewBox:String,type:{type:String,default:"dot"},blur:Boolean,size:String,spinnerStyle:Object,textStyle:Object},ue=T({name:"EleLoading",__name:"index",props:ie,setup(t){const e=t,n=Q(()=>e.type==="circle");return(l,a)=>S((k(),X(le,{"element-loading-text":n.value?l.text:void 0,"element-loading-background":n.value?l.background:void 0,"element-loading-spinner":n.value?l.spinner:void 0,"element-loading-svg-view-box":n.value?l.svgViewBox:void 0,class:A(["ele-loading",{"ele-loading-show":l.loading}])},{default:z(()=>[B(l.$slots,"default"),n.value?h("",!0):S((k(),V("div",{key:0,style:I(l.spinnerStyle),class:A(["ele-loading-spinner",{"ele-loading-blur":l.blur},{"ele-loading-small":l.size==="small"},{"ele-loading-large":l.size==="large"}])},[B(l.$slots,"spinner",{},()=>[a[0]||(a[0]=p("div",{class:"ele-loading-dot"},[p("i"),p("i"),p("i"),p("i")],-1))]),l.text?(k(),V("div",{key:0,class:"ele-loading-text",style:I(l.textStyle)},ee(l.text),5)):h("",!0)],6)),[[P,l.loading]])]),_:3},8,["element-loading-text","element-loading-background","element-loading-spinner","element-loading-svg-view-box","class"])),[[W(re),n.value&&l.loading]])}});export{ue as _,re as v};
