import{d as P,bU as R,r as c,Z as h,K as B,p as E,o as l,e as b,b as $,a1 as z,a7 as n,c as a,w as S,a8 as k,u as s,fU as N,bX as T,bT as u,E as g,ak as U,f as V,a6 as _,fV as w}from"./index-BHMAnI5P.js";const A={text:String,innerStyle:Object,customStyle:Object,icon:[String,Object,Function],iconProps:Object,iconStyle:Object,copiedIcon:[String,Object,Function],copiedIconProps:Object,copiedIconStyle:Object,tooltip:{type:[Boolean,Object],default:!0},resetAfter:{type:Number,default:1e3},locale:Object},D={copy:y=>!0},K=P({name:"EleCopyable",__name:"index",props:A,emits:D,setup(y,{emit:j}){const r=y,m=j,{lang:f}=R("copyable",r),t={timer:null},d=c(null),i=c(null),v=c(),o=c(!1),p=()=>{i.value&&i.value.updatePopper()},O=()=>{var e;return r.text?r.text:((e=d.value)==null?void 0:e.innerText)||""},C=()=>{w(O()).then(()=>{o.value=!0,p(),t.timer&&clearTimeout(t.timer),t.timer=setTimeout(()=>{o.value=!1,p()},r.resetAfter||1e3),m("copy")}).catch(e=>{o.value=!1,p(),m("copy",e)})},I=e=>{r.tooltip&&(v.value=e.currentTarget)};return h(()=>{t.timer&&clearTimeout(t.timer),t.timer=null,o.value=!1}),B(()=>{t.timer&&clearTimeout(t.timer),t.timer=null}),(e,F)=>(l(),E("div",{class:_(["ele-copyable",{"ele-copyable-done":o.value}])},[b("div",{ref_key:"innerRef",ref:d,class:"ele-copyable-inner",style:n(e.innerStyle)},[z(e.$slots,"default")],4),b("div",{class:"ele-copyable-icon",style:n(e.customStyle),onMouseover:I,onClick:C},[o.value?(l(),a(s(g),T(u({key:0},e.copiedIconProps||{})),{default:S(()=>[e.copiedIcon?(l(),a(k(e.copiedIcon),{key:0,style:n(e.copiedIconStyle)},null,8,["style"])):(l(),a(s(N),{key:1,style:n(e.copiedIconStyle)},null,8,["style"]))]),_:1},16)):(l(),a(s(g),T(u({key:1},e.iconProps||{})),{default:S(()=>[e.icon?(l(),a(k(e.icon),{key:0,style:n(e.iconStyle)},null,8,["style"])):(l(),a(s(U),{key:1,style:n(e.iconStyle)},null,8,["style"]))]),_:1},16))],36),$(V,u({placement:"top",offset:6},!e.tooltip||e.tooltip===!0?{}:e.tooltip,{content:o.value?s(f).copied:s(f).copy,virtualRef:v.value,virtualTriggering:!0,ref_key:"tooltipRef",ref:i}),null,16,["content","virtualRef"])],2))}});export{K as _};
