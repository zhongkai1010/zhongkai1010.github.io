import{_ as D}from"./index-COQ7fF23.js";import{d as N,b0 as K,c as $,o as w,w as n,b as t,aI as O,aK as R,u as m,cz as A,aD as I,i as s,aN as M,d6 as S,aO as U,r as _,l as W,bQ as L,el as P,gN as Q,b7 as j,n as z,aF as q}from"./index-BUAqAxXK.js";import{_ as V}from"./index-DZrliXEA.js";import{_ as G}from"./index-AXYXDzqP.js";import"./index-r7mMGkrk.js";import"./index-CdLgbD5e.js";import"./index-xRipJ44W.js";import"./virtual-list-syiU32ro.js";import"./index-A1VLWwAE.js";import"./index-DSrgrfbB.js";import{E as H}from"./link-Bi1hqgQN.js";import{E as J,a as X}from"./col-P_VXz8la.js";import{_ as Y}from"./organization-edit.vue_vue_type_script_setup_true_lang-BMT2AXOa.js";import{l as Z,r as ee}from"./index-fKqWSysC.js";import"./isArrayLikeObject-CJOiLY1k.js";import"./vuedraggable.umd-1ODZwtIN.js";import"./input-number-C1NyU4z_.js";import"./index-CUjPTjvr.js";import"./organization-select.vue_vue_type_script_setup_true_lang-CyF6nwaf.js";import"./tree-UyUimKHi.js";import"./tree-select-BUuB678J.js";const oe=N({__name:"organization-search",emits:["search"],setup(T,{emit:d}){const x=d,[r,f]=K({organizationName:"",organizationFullName:"",organizationType:void 0}),p=()=>{x("search",{...r})},g=()=>{f(),p()};return(E,a)=>{const b=R,y=O,v=X,k=A,o=I,e=J,l=U,i=V;return w(),$(i,{"body-style":{paddingBottom:"2px"}},{default:n(()=>[t(l,{"label-width":"72px",onKeyup:S(p,["enter"]),onSubmit:a[2]||(a[2]=M(()=>{},["prevent"]))},{default:n(()=>[t(e,{gutter:8},{default:n(()=>[t(v,{lg:6,md:8,sm:12,xs:24},{default:n(()=>[t(y,{label:"机构名称"},{default:n(()=>[t(b,{clearable:"",modelValue:m(r).organizationName,"onUpdate:modelValue":a[0]||(a[0]=u=>m(r).organizationName=u),modelModifiers:{trim:!0},placeholder:"请输入"},null,8,["modelValue"])]),_:1})]),_:1}),t(v,{lg:6,md:8,sm:12,xs:24},{default:n(()=>[t(y,{label:"机构类型"},{default:n(()=>[t(k,{code:"organization_type",modelValue:m(r).organizationType,"onUpdate:modelValue":a[1]||(a[1]=u=>m(r).organizationType=u),placeholder:"请选择"},null,8,["modelValue"])]),_:1})]),_:1}),t(v,{lg:12,md:8,sm:24,xs:24},{default:n(()=>[t(y,{"label-width":"16px"},{default:n(()=>[t(o,{type:"primary",onClick:p},{default:n(()=>a[3]||(a[3]=[s("查询")])),_:1}),t(o,{onClick:g},{default:n(()=>a[4]||(a[4]=[s("重置")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}}),Ee=N({name:"SystemOrganization",__name:"index",setup(T){const d=_(null),x=_([{type:"index",columnKey:"index",width:50,align:"center",fixed:"left"},{prop:"organizationName",label:"机构名称",sortable:"custom",minWidth:160},{prop:"organizationTypeName",label:"机构类型",minWidth:100,align:"center"},{prop:"sortNumber",label:"排序号",minWidth:100,align:"center"},{prop:"createTime",label:"创建时间",sortable:"custom",width:180,align:"center"},{columnKey:"action",label:"操作",width:180,align:"center",slot:"action",hideInPrint:!0,hideInExport:!0}]),r=_(null),f=_(!1),p=_(),g=_([]),E=async({where:o,orders:e})=>{const l=await Z({...o,...e});return g.value=j({data:l,idField:"organizationId",parentIdField:"parentId"}),g.value},a=o=>{var e,l;(l=(e=d.value)==null?void 0:e.reload)==null||l.call(e,{where:o})},b=(o,e)=>{r.value=o!=null?o:null,p.value=e,f.value=!0},y=o=>{var e;if((e=o.children)!=null&&e.length){z.error("请先删除子节点");return}q.confirm("确定要删除“"+o.organizationName+"”吗?","系统提示",{type:"warning",draggable:!0}).then(()=>{const l=z.loading({message:"请求中..",plain:!0});ee(o.organizationId).then(i=>{l.close(),z.success(i),a()}).catch(i=>{l.close(),z.error(i.message)})}).catch(()=>{})},v=()=>{var o,e;(e=(o=d.value)==null?void 0:o.toggleRowExpansionAll)==null||e.call(o,!0)},k=()=>{var o,e;(e=(o=d.value)==null?void 0:o.toggleRowExpansionAll)==null||e.call(o,!1)};return(o,e)=>{const l=I,i=H,u=W,h=G,F=V,B=D;return w(),$(B,null,{default:n(()=>[t(oe,{onSearch:a}),t(F,{"body-style":{paddingTop:"8px"}},{default:n(()=>[t(h,{sticky:"",ref_key:"tableRef",ref:d,"row-key":"organizationId",columns:x.value,datasource:E,"show-overflow-tooltip":!0,"highlight-current-row":!0,"export-config":{fileName:"机构数据"},"default-expand-all":!0,pagination:!1,"cache-key":"systemOrganizationTable"},{toolbar:n(()=>[t(l,{type:"primary",class:"ele-btn-icon",icon:m(L),onClick:e[0]||(e[0]=c=>b())},{default:n(()=>e[2]||(e[2]=[s(" 新建 ")])),_:1},8,["icon"]),t(l,{class:"ele-btn-icon",icon:m(P),onClick:v},{default:n(()=>e[3]||(e[3]=[s(" 展开全部 ")])),_:1},8,["icon"]),t(l,{class:"ele-btn-icon",icon:m(Q),onClick:k},{default:n(()=>e[4]||(e[4]=[s(" 折叠全部 ")])),_:1},8,["icon"])]),action:n(({row:c})=>[t(i,{type:"primary",underline:!1,onClick:C=>b(null,c.organizationId)},{default:n(()=>e[5]||(e[5]=[s(" 添加 ")])),_:2},1032,["onClick"]),t(u,{direction:"vertical"}),t(i,{type:"primary",underline:!1,onClick:C=>b(c)},{default:n(()=>e[6]||(e[6]=[s(" 修改 ")])),_:2},1032,["onClick"]),t(u,{direction:"vertical"}),t(i,{type:"danger",underline:!1,onClick:C=>y(c)},{default:n(()=>e[7]||(e[7]=[s(" 删除 ")])),_:2},1032,["onClick"])]),_:1},8,["columns"])]),_:1}),t(Y,{modelValue:f.value,"onUpdate:modelValue":e[1]||(e[1]=c=>f.value=c),data:r.value,"organization-id":p.value,"organization-data":g.value,onDone:a},null,8,["modelValue","data","organization-id","organization-data"])]),_:1})}}});export{Ee as default};
