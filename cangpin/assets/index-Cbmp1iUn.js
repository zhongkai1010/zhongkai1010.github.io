import{d as Z,e_ as G,r as o,Z as H,Y as Q,p as C,o as n,a5 as h,c6 as I,b,F as W,q as X,c as v,w as f,h as _,t as $,a7 as k,u,l as S,c7 as j,a1 as x,E as O,bP as ee,aJ as ae,fU as le,a6 as P,bR as te,f as se,U as w}from"./index-D0yT1AcU.js";const oe={modelValue:Array,type:String,hit:Boolean,color:String,size:String,effect:String,round:Boolean,placeholder:String,inputStyle:Object,inputTagStyle:Object,buttonStyle:Object,itemStyle:Object,validator:Function,beforeRemove:Function,tooltipProps:Object,readonly:Boolean,disabled:Boolean},ne={"update:modelValue":p=>!0,change:p=>!0,itemClick:(p,z)=>!0},ue={key:0},re=Z({name:"EleEditTag",__name:"index",props:oe,emits:ne,setup(p,{expose:z,emit:A}){const l=p,T=A,{validateChange:D}=G(),m=o(null),g=o(null),i=o(!1),s=o(""),r=o(""),c=o(!1),t=o(!1),y=o(!1),E=e=>{T("update:modelValue",e),D(),T("change",e)},R=e=>{if(t.value=!1,i.value=!1,N(""),r.value="",c.value=!1,e){const a=l.modelValue?[...l.modelValue]:[];a.push(e),E(a)}},B=e=>{if(!l.modelValue)return;const a=[...l.modelValue];a.splice(e,1),E(a)},N=e=>{s.value=e},F=()=>{setTimeout(()=>{g.value&&g.value.focus()},0)},U=()=>{l.disabled||(t.value=!1,r.value="",i.value=!0,w(()=>{F()}))},M=(e,a)=>{if(typeof l.beforeRemove!="function"){B(e);return}l.beforeRemove(e,a).then(()=>{B(e)}).catch(()=>{})},q=(e,a)=>{T("itemClick",e,a)},J=()=>{if(s.value){if(typeof l.validator!="function"){R(s.value);return}c.value=!0,l.validator(s.value).then(()=>{R(s.value)}).catch(e=>{c.value=!1,e&&e.message!=null&&e.message!==""&&(r.value=e.message,i.value&&!y.value&&(t.value=!0)),w(()=>{F()})})}},K=()=>{t.value=!1,s.value||(i.value=!1,r.value="")},L=()=>{r.value&&!t.value&&i.value&&!y.value&&(t.value=!0)};return H(()=>{y.value=!0,t.value=!1}),Q(()=>{y.value=!1}),z({inputTagRef:m,inputRef:g}),(e,a)=>(n(),C("div",{class:P(["ele-edit-tag",{"is-large":e.size==="large"},{"is-small":e.size==="small"},{"is-disabled":e.disabled},{"is-readonly":e.readonly}])},[e.modelValue?(n(!0),C(W,{key:0},X(e.modelValue,(d,V)=>(n(),v(u(S),{key:V+"-"+d,hit:e.hit,type:e.type,color:e.color,size:e.size,effect:e.effect,round:e.round,closable:!(e.readonly||e.disabled),disableTransitions:!0,style:k(e.itemStyle),onClose:Y=>M(V,d),onClick:Y=>q(V,d)},{default:f(()=>[_($(d),1)]),_:2},1032,["hit","type","color","size","effect","round","closable","style","onClose","onClick"]))),128)):h("",!0),e.readonly?h("",!0):I((n(),v(u(S),{key:1,hit:e.hit,type:"info",size:e.size,round:e.round,disableTransitions:!0,class:"ele-edit-tag-add",style:k(e.buttonStyle),onClick:U},{default:f(()=>[x(e.$slots,"placeholder",{},()=>[e.placeholder?(n(),C("span",ue,$(e.placeholder),1)):(n(),v(u(O),{key:1,class:"ele-edit-tag-add-icon"},{default:f(()=>[b(u(ee))]),_:1}))])]),_:3},8,["hit","size","round","style"])),[[j,!i.value]]),e.readonly?h("",!0):I((n(),v(u(S),{key:2,ref_key:"inputTagRef",ref:m,size:e.size,round:e.round,disableTransitions:!0,class:P(["ele-edit-tag-input",{"is-error":!!r.value}]),style:k(e.inputTagStyle)},{default:f(()=>[b(u(ae),{ref_key:"inputRef",ref:g,disabled:c.value,modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=d=>s.value=d),validateEvent:!1,style:k(e.inputStyle),onChange:J,onBlur:K,onFocus:L},{suffix:f(()=>[c.value?(n(),v(u(O),{key:0,class:"is-loading"},{default:f(()=>[b(u(le))]),_:1})):h("",!0)]),_:1},8,["disabled","modelValue","style"])]),_:1},8,["size","round","class","style"])),[[j,i.value]]),b(se,te({offset:7,hideAfter:0,trigger:"click",triggerKeys:[],disabled:!t.value},e.tooltipProps||{},{virtualTriggering:!0,virtualRef:m.value?m.value.$el:void 0,content:r.value,visible:t.value}),null,16,["disabled","virtualRef","content","visible"])],2))}});export{re as _};
