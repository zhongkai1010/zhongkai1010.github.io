import{eW as yt,d as ue,a9 as Oe,N as pe,F as mt,cd as we,a1 as Ne,r as G,R as De,cB as Se,K as A,u as c,c5 as kt,U as Ze,cc as Ct,dV as bt,Z as St,V as ie,dO as Nt,dQ as Je,a3 as Re,c2 as oe,a4 as Et,cA as ke,S as re,cg as Qe,O as Tt,cC as Ot,P as et,a5 as tt,eF as wt,q as xe,o as ne,e as Ae,c as ge,a6 as Pe,b as lt,w as be,a7 as de,aN as he,E as xt,aT as Kt,a8 as at,d8 as Mt,cp as _t,a2 as Ke,t as nt,a0 as He,dl as It,aa as Lt,eZ as ce,ea as Dt,eX as Rt,eY as At,aJ as Bt,bW as $e,bX as We,bS as Vt,e6 as zt,i as Ft,aH as Pt,e_ as je}from"./index-BUAqAxXK.js";import{_ as Ht}from"./index-CWwKS0Uj.js";import{c as $t,r as Wt,V as jt,H as st,I as qe,S as Ge,a as qt,h as Gt,u as Ut,B as Yt,F as Xt,m as Me,R as Ee,d as Ue,e as Zt,f as Ye,A as _e,g as Te,j as Jt,C as Xe,E as Qt,k as el,l as tl}from"./virtual-list-syiU32ro.js";const ll={[st]:"deltaX",[jt]:"deltaY"},al=({atEndEdge:l,atStartEdge:n,layout:s},t)=>{let o,h=0;const b=g=>g<0&&n.value||g>0&&l.value;return{hasReachedEdge:b,onWheel:g=>{$t(o);const r=g[ll[s.value]];b(h)&&b(h+r)||(h+=r,yt()||g.preventDefault(),o=Wt(()=>{t(h),h=0}))}}},nl=({name:l,getOffset:n,getItemSize:s,getItemOffset:t,getEstimatedTotalSize:o,getStartIndexForOffset:h,getStopIndexForStartIndex:b,initCache:v,clearCache:g,validateProps:r})=>ue({name:l,props:qt,emits:[qe,Ge],setup(d,{emit:u,expose:O}){const i=De(),y=Ne("vl"),T=G(v(d,i)),L=Ut(),S=G(),z=G(),m=G(),p=G({isScrolling:!1,scrollDir:"forward",scrollOffset:Se(d.initScrollOffset)?d.initScrollOffset:0,updateRequested:!1,isScrollbarDragging:!1,scrollbarAlwaysOn:d.scrollbarAlwaysOn}),M=A(()=>{const{total:f,cache:w}=d,{isScrolling:k,scrollDir:K,scrollOffset:I}=c(p);if(f===0)return[0,0,0,0];const D=h(d,I,c(T)),R=b(d,D,I,c(T)),$=!k||K===Yt?Math.max(1,w):1,q=!k||K===Xt?Math.max(1,w):1;return[Math.max(0,D-$),Math.max(0,Math.min(f-1,R+q)),D,R]}),C=A(()=>o(d,c(T))),x=A(()=>Me(d.layout)),B=A(()=>[{position:"relative",[`overflow-${x.value?"x":"y"}`]:"scroll",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:d.direction,height:Se(d.height)?`${d.height}px`:d.height,width:Se(d.width)?`${d.width}px`:d.width},d.style]),V=A(()=>{const f=c(C),w=c(x);return{height:w?"100%":`${f}px`,pointerEvents:c(p).isScrolling?"none":void 0,width:w?`${f}px`:"100%"}}),F=A(()=>x.value?d.width:d.height),{onWheel:P}=al({atStartEdge:A(()=>p.value.scrollOffset<=0),atEndEdge:A(()=>p.value.scrollOffset>=C.value),layout:A(()=>d.layout)},f=>{var w,k;(k=(w=m.value).onMouseUp)==null||k.call(w),_(Math.min(p.value.scrollOffset+f,C.value-F.value))});kt(S,"wheel",P,{passive:!1});const W=()=>{const{total:f}=d;if(f>0){const[I,D,R,$]=c(M);u(qe,I,D,R,$)}const{scrollDir:w,scrollOffset:k,updateRequested:K}=c(p);u(Ge,w,k,K)},Q=f=>{const{clientHeight:w,scrollHeight:k,scrollTop:K}=f.currentTarget,I=c(p);if(I.scrollOffset===K)return;const D=Math.max(0,Math.min(K,k-w));p.value={...I,isScrolling:!0,scrollDir:Te(I.scrollOffset,D),scrollOffset:D,updateRequested:!1},ie(U)},Z=f=>{const{clientWidth:w,scrollLeft:k,scrollWidth:K}=f.currentTarget,I=c(p);if(I.scrollOffset===k)return;const{direction:D}=d;let R=k;if(D===Ee)switch(Ue()){case Ye:{R=-k;break}case Jt:{R=K-w-k;break}}R=Math.max(0,Math.min(R,K-w)),p.value={...I,isScrolling:!0,scrollDir:Te(I.scrollOffset,R),scrollOffset:R,updateRequested:!1},ie(U)},le=f=>{c(x)?Z(f):Q(f),W()},e=(f,w)=>{const k=(C.value-F.value)/w*f;_(Math.min(C.value-F.value,k))},_=f=>{f=Math.max(f,0),f!==c(p).scrollOffset&&(p.value={...c(p),scrollOffset:f,scrollDir:Te(c(p).scrollOffset,f),updateRequested:!0},ie(U))},N=(f,w=_e)=>{const{scrollOffset:k}=c(p);f=Math.max(0,Math.min(f,d.total-1)),_(n(d,f,w,k,c(T)))},H=f=>{const{direction:w,itemSize:k,layout:K}=d,I=L.value(k,K,w);let D;if(Nt(I,String(f)))D=I[f];else{const R=t(d,f,c(T)),$=s(d,f,c(T)),q=c(x),a=w===Ee,E=q?R:0;I[f]=D={position:"absolute",left:a?void 0:`${E}px`,right:a?`${E}px`:void 0,top:q?0:`${R}px`,height:q?"100%":`${$}px`,width:q?`${$}px`:"100%"}}return D},U=()=>{p.value.isScrolling=!1,ie(()=>{L.value(-1,null,null)})},j=()=>{const f=S.value;f&&(f.scrollTop=0)};Ze(()=>{if(!Ct)return;const{initScrollOffset:f}=d,w=c(S);Se(f)&&w&&(c(x)?w.scrollLeft=f:w.scrollTop=f),W()}),bt(()=>{const{direction:f,layout:w}=d,{scrollOffset:k,updateRequested:K}=c(p),I=c(S);if(K&&I)if(w===st)if(f===Ee)switch(Ue()){case Ye:{I.scrollLeft=-k;break}case Zt:{I.scrollLeft=k;break}default:{const{clientWidth:D,scrollWidth:R}=I;I.scrollLeft=R-D-k;break}}else I.scrollLeft=k;else I.scrollTop=k}),St(()=>{c(S).scrollTop=c(p).scrollOffset});const se={ns:y,clientSize:F,estimatedTotalSize:C,windowStyle:B,windowRef:S,innerRef:z,innerStyle:V,itemsToRender:M,scrollbarRef:m,states:p,getItemStyle:H,onScroll:le,onScrollbarScroll:e,onWheel:P,scrollTo:_,scrollToItem:N,resetScrollTop:j};return O({windowRef:S,innerRef:z,getItemStyleCache:L,scrollTo:_,scrollToItem:N,resetScrollTop:j,states:p}),se},render(d){var u;const{$slots:O,className:i,clientSize:y,containerElement:T,data:L,getItemStyle:S,innerElement:z,itemsToRender:m,innerStyle:p,layout:M,total:C,onScroll:x,onScrollbarScroll:B,states:V,useIsScrolling:F,windowStyle:P,ns:W}=d,[Q,Z]=m,le=Oe(T),e=Oe(z),_=[];if(C>0)for(let j=Q;j<=Z;j++)_.push(pe(mt,{key:j},(u=O.default)==null?void 0:u.call(O,{data:L,index:j,isScrolling:F?V.isScrolling:void 0,style:S(j)})));const N=[pe(e,{style:p,ref:"innerRef"},we(e)?_:{default:()=>_})],H=pe(Gt,{ref:"scrollbarRef",clientSize:y,layout:M,onScroll:B,ratio:y*100/this.estimatedTotalSize,scrollFrom:V.scrollOffset/(this.estimatedTotalSize-y),total:C}),U=pe(le,{class:[W.e("window"),i],style:P,onScroll:x,ref:"windowRef",key:0},we(le)?[N]:{default:()=>[N]});return pe("div",{key:0,class:[W.e("wrapper"),V.scrollbarAlwaysOn?"always-on":""]},[U,H])}}),sl=nl({name:"ElFixedSizeList",getItemOffset:({itemSize:l},n)=>n*l,getItemSize:({itemSize:l})=>l,getEstimatedTotalSize:({total:l,itemSize:n})=>n*l,getOffset:({height:l,total:n,itemSize:s,layout:t,width:o},h,b,v)=>{const g=Me(t)?o:l,r=Math.max(0,n*s-g),d=Math.min(r,h*s),u=Math.max(0,(h+1)*s-g);switch(b===tl&&(v>=u-g&&v<=d+g?b=_e:b=Xe),b){case el:return d;case Qt:return u;case Xe:{const O=Math.round(u+(d-u)/2);return O<Math.ceil(g/2)?0:O>r+Math.floor(g/2)?r:O}case _e:default:return v>=u&&v<=d?v:v<u?u:d}},getStartIndexForOffset:({total:l,itemSize:n},s)=>Math.max(0,Math.min(l-1,Math.floor(s/n))),getStopIndexForStartIndex:({height:l,total:n,itemSize:s,layout:t,width:o},h,b)=>{const v=h*s,g=Me(t)?o:l,r=Math.ceil((g+b-v)/s);return Math.max(0,Math.min(n-1,h+r-1))},initCache(){},clearCache:!0,validateProps(){}}),Be=Symbol(),ol={key:-1,level:-1,data:{}};var Ce=(l=>(l.KEY="id",l.LABEL="label",l.CHILDREN="children",l.DISABLED="disabled",l.CLASS="",l))(Ce||{}),Ie=(l=>(l.ADD="add",l.DELETE="delete",l))(Ie||{});const ot={type:Number,default:26},cl=Re({data:{type:oe(Array),default:()=>ke([])},emptyText:{type:String},height:{type:Number,default:200},props:{type:oe(Object),default:()=>ke({children:"children",label:"label",disabled:"disabled",value:"id",class:""})},highlightCurrent:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},defaultCheckedKeys:{type:oe(Array),default:()=>ke([])},checkStrictly:{type:Boolean,default:!1},defaultExpandedKeys:{type:oe(Array),default:()=>ke([])},indent:{type:Number,default:16},itemSize:ot,icon:{type:Et},expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:{type:Boolean,default:!1},currentNodeKey:{type:oe([String,Number])},accordion:{type:Boolean,default:!1},filterMethod:{type:oe(Function)},perfMode:{type:Boolean,default:!0}}),rl=Re({node:{type:oe(Object),default:()=>ke(ol)},expanded:{type:Boolean,default:!1},checked:{type:Boolean,default:!1},indeterminate:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},current:{type:Boolean,default:!1},hiddenExpandIcon:{type:Boolean,default:!1},itemSize:ot}),il=Re({node:{type:oe(Object),required:!0}}),ct="node-click",rt="node-drop",it="node-expand",dt="node-collapse",ut="current-change",ft="check",ht="check-change",vt="node-contextmenu",dl={[ct]:(l,n,s)=>l&&n&&s,[rt]:(l,n,s)=>l&&n&&s,[it]:(l,n)=>l&&n,[dt]:(l,n)=>l&&n,[ut]:(l,n)=>l&&n,[ft]:(l,n)=>l&&n,[ht]:(l,n)=>l&&Je(n),[vt]:(l,n,s)=>l&&n&&s},ul={click:(l,n)=>!!(l&&n),drop:(l,n)=>!!(l&&n),toggle:l=>!!l,check:(l,n)=>l&&Je(n)};function fl(l,n){const s=G(new Set),t=G(new Set),{emit:o}=De();re([()=>n.value,()=>l.defaultCheckedKeys],()=>ie(()=>{z(l.defaultCheckedKeys)}),{immediate:!0});const h=()=>{if(!n.value||!l.showCheckbox||l.checkStrictly)return;const{levelTreeNodeMap:m,maxLevel:p}=n.value,M=s.value,C=new Set;for(let x=p-1;x>=1;--x){const B=m.get(x);B&&B.forEach(V=>{const F=V.children;if(F){let P=!0,W=!1;for(const Q of F){const Z=Q.key;if(M.has(Z))W=!0;else if(C.has(Z)){P=!1,W=!0;break}else P=!1}P?M.add(V.key):W?(C.add(V.key),M.delete(V.key)):(M.delete(V.key),C.delete(V.key))}})}t.value=C},b=m=>s.value.has(m.key),v=m=>t.value.has(m.key),g=(m,p,M=!0,C=!0)=>{const x=s.value,B=(V,F)=>{x[F?Ie.ADD:Ie.DELETE](V.key);const P=V.children;!l.checkStrictly&&P&&P.forEach(W=>{W.disabled||B(W,F)})};B(m,p),C&&h(),M&&r(m,p)},r=(m,p)=>{const{checkedNodes:M,checkedKeys:C}=y(),{halfCheckedNodes:x,halfCheckedKeys:B}=T();o(ft,m.data,{checkedKeys:C,checkedNodes:M,halfCheckedKeys:B,halfCheckedNodes:x}),o(ht,m.data,p)};function d(m=!1){return y(m).checkedKeys}function u(m=!1){return y(m).checkedNodes}function O(){return T().halfCheckedKeys}function i(){return T().halfCheckedNodes}function y(m=!1){const p=[],M=[];if(n!=null&&n.value&&l.showCheckbox){const{treeNodeMap:C}=n.value;s.value.forEach(x=>{const B=C.get(x);B&&(!m||m&&B.isLeaf)&&(M.push(x),p.push(B.data))})}return{checkedKeys:M,checkedNodes:p}}function T(){const m=[],p=[];if(n!=null&&n.value&&l.showCheckbox){const{treeNodeMap:M}=n.value;t.value.forEach(C=>{const x=M.get(C);x&&(p.push(C),m.push(x.data))})}return{halfCheckedNodes:m,halfCheckedKeys:p}}function L(m){s.value.clear(),t.value.clear(),ie(()=>{z(m)})}function S(m,p){if(n!=null&&n.value&&l.showCheckbox){const M=n.value.treeNodeMap.get(m);M&&g(M,p,!1)}}function z(m){if(n!=null&&n.value){const{treeNodeMap:p}=n.value;if(l.showCheckbox&&p&&(m==null?void 0:m.length)>0){for(const M of m){const C=p.get(M);C&&!b(C)&&g(C,!0,!1,!1)}h()}}}return{updateCheckedKeys:h,toggleCheckbox:g,isChecked:b,isIndeterminate:v,getCheckedKeys:d,getCheckedNodes:u,getHalfCheckedKeys:O,getHalfCheckedNodes:i,setChecked:S,setCheckedKeys:L}}function hl(l,n){const s=G(new Set([])),t=G(new Set([])),o=A(()=>Qe(l.filterMethod));function h(v){var g;if(!o.value)return;const r=new Set,d=t.value,u=s.value,O=[],i=((g=n.value)==null?void 0:g.treeNodes)||[],y=l.filterMethod;u.clear();function T(L){L.forEach(S=>{O.push(S),y!=null&&y(v,S.data,S)?O.forEach(m=>{r.add(m.key)}):S.isLeaf&&u.add(S.key);const z=S.children;if(z&&T(z),!S.isLeaf){if(!r.has(S.key))u.add(S.key);else if(z){let m=!0;for(const p of z)if(!u.has(p.key)){m=!1;break}m?d.add(S.key):d.delete(S.key)}}O.pop()})}return T(i),r}function b(v){return t.value.has(v.key)}return{hiddenExpandIconKeySet:t,hiddenNodeKeySet:s,doFilter:h,isForceHiddenExpandIcon:b}}function vl(l,n){const s=G(new Set(l.defaultExpandedKeys)),t=G(),o=Tt(),h=G();re(()=>l.currentNodeKey,a=>{t.value=a},{immediate:!0}),re(()=>l.data,a=>{D(a)},{immediate:!0});const{isIndeterminate:b,isChecked:v,toggleCheckbox:g,getCheckedKeys:r,getCheckedNodes:d,getHalfCheckedKeys:u,getHalfCheckedNodes:O,setChecked:i,setCheckedKeys:y}=fl(l,o),{doFilter:T,hiddenNodeKeySet:L,isForceHiddenExpandIcon:S}=hl(l,o),z=A(()=>{var a;return((a=l.props)==null?void 0:a.value)||Ce.KEY}),m=A(()=>{var a;return((a=l.props)==null?void 0:a.children)||Ce.CHILDREN}),p=A(()=>{var a;return((a=l.props)==null?void 0:a.disabled)||Ce.DISABLED}),M=A(()=>{var a;return((a=l.props)==null?void 0:a.label)||Ce.LABEL}),C=A(()=>{var a;const E=s.value,Y=L.value,ee=[],X=((a=o.value)==null?void 0:a.treeNodes)||[],fe=[];for(let J=X.length-1;J>=0;--J)fe.push(X[J]);for(;fe.length;){const J=fe.pop();if(!Y.has(J.key)&&(ee.push(J),J.children&&E.has(J.key)))for(let te=J.children.length-1;te>=0;--te)fe.push(J.children[te])}return ee}),x=A(()=>C.value.length>0);function B(a){const E=new Map,Y=new Map;let ee=1;function X(J,te=1,gt=void 0){var Ve;const ze=[];for(const ye of J){const Fe=P(ye),ae={level:te,key:Fe,data:ye};ae.label=Q(ye),ae.parent=gt;const me=F(ye);ae.disabled=W(ye),ae.isLeaf=!me||me.length===0,me&&me.length&&(ae.children=X(me,te+1,ae)),ze.push(ae),E.set(Fe,ae),Y.has(te)||Y.set(te,[]),(Ve=Y.get(te))==null||Ve.push(ae)}return te>ee&&(ee=te),ze}const fe=X(a);return{treeNodeMap:E,levelTreeNodeMap:Y,maxLevel:ee,treeNodes:fe}}function V(a){const E=T(a);E&&(s.value=E)}function F(a){return a[m.value]}function P(a){return a?a[z.value]:""}function W(a){return a[p.value]}function Q(a){return a[M.value]}function Z(a){s.value.has(a.key)?j(a):U(a)}function le(a){const E=new Set,Y=o.value.treeNodeMap;a.forEach(ee=>{let X=Y.get(ee);for(;X&&!E.has(X.key);)E.add(X.key),X=X.parent}),s.value=E}function e(a,E){n(ct,a.data,a,E),N(a),l.expandOnClickNode&&Z(a),l.showCheckbox&&l.checkOnClickNode&&!a.disabled&&g(a,!v(a),!0)}function _(a,E){n(rt,a.data,a,E)}function N(a){w(a)||(t.value=a.key,n(ut,a.data,a))}function H(a,E){g(a,E)}function U(a){const E=s.value;if(o.value&&l.accordion){const{treeNodeMap:Y}=o.value;E.forEach(ee=>{const X=Y.get(ee);a&&a.level===(X==null?void 0:X.level)&&E.delete(ee)})}E.add(a.key),n(it,a.data,a)}function j(a){s.value.delete(a.key),n(dt,a.data,a)}function se(a){return s.value.has(a.key)}function f(a){return!!a.disabled}function w(a){const E=t.value;return E!==void 0&&E===a.key}function k(){var a,E;if(t.value)return(E=(a=o.value)==null?void 0:a.treeNodeMap.get(t.value))==null?void 0:E.data}function K(){return t.value}function I(a){t.value=a}function D(a){ie(()=>o.value=B(a))}function R(a){var E;const Y=Ot(a)?P(a):a;return(E=o.value)==null?void 0:E.treeNodeMap.get(Y)}function $(a,E="auto"){const Y=R(a);Y&&h.value&&h.value.scrollToItem(C.value.indexOf(Y),E)}function q(a){var E;(E=h.value)==null||E.scrollTo(a)}return{tree:o,flattenTree:C,isNotEmpty:x,listRef:h,getKey:P,getChildren:F,toggleExpand:Z,toggleCheckbox:g,isExpanded:se,isChecked:v,isIndeterminate:b,isDisabled:f,isCurrent:w,isForceHiddenExpandIcon:S,handleNodeClick:e,handleNodeDrop:_,handleNodeCheck:H,getCurrentNode:k,getCurrentKey:K,setCurrentKey:I,getCheckedKeys:r,getCheckedNodes:d,getHalfCheckedKeys:u,getHalfCheckedNodes:O,setChecked:i,setCheckedKeys:y,filter:V,setData:D,getNode:R,expandNode:U,collapseNode:j,setExpandedKeys:le,scrollToNode:$,scrollTo:q}}var pl=ue({name:"ElTreeNodeContent",props:il,setup(l){const n=et(Be),s=Ne("tree");return()=>{const t=l.node,{data:o}=t;return n!=null&&n.ctx.slots.default?n.ctx.slots.default({node:t,data:o}):pe("span",{class:s.be("node","label")},[t==null?void 0:t.label])}}});const gl=ue({name:"ElTreeNode"}),yl=ue({...gl,props:rl,emits:ul,setup(l,{emit:n}){const s=l,t=et(Be),o=Ne("tree"),h=A(()=>{var i;return(i=t==null?void 0:t.props.indent)!=null?i:16}),b=A(()=>{var i;return(i=t==null?void 0:t.props.icon)!=null?i:wt}),v=i=>{const y=t==null?void 0:t.props.props.class;if(!y)return{};let T;if(Qe(y)){const{data:L}=i;T=y(L,i)}else T=y;return we(T)?{[T]:!0}:T},g=i=>{n("click",s.node,i)},r=i=>{n("drop",s.node,i)},d=()=>{n("toggle",s.node)},u=i=>{n("check",s.node,i)},O=i=>{var y,T,L,S;(L=(T=(y=t==null?void 0:t.instance)==null?void 0:y.vnode)==null?void 0:T.props)!=null&&L.onNodeContextmenu&&(i.stopPropagation(),i.preventDefault()),t==null||t.ctx.emit(vt,i,(S=s.node)==null?void 0:S.data,s.node)};return(i,y)=>{var T,L,S;return ne(),xe("div",{ref:"node$",class:de([c(o).b("node"),c(o).is("expanded",i.expanded),c(o).is("current",i.current),c(o).is("focusable",!i.disabled),c(o).is("checked",!i.disabled&&i.checked),v(i.node)]),role:"treeitem",tabindex:"-1","aria-expanded":i.expanded,"aria-disabled":i.disabled,"aria-checked":i.checked,"data-key":(T=i.node)==null?void 0:T.key,onClick:he(g,["stop"]),onContextmenu:O,onDragover:he(()=>{},["prevent"]),onDragenter:he(()=>{},["prevent"]),onDrop:he(r,["stop"])},[Ae("div",{class:de(c(o).be("node","content")),style:at({paddingLeft:`${(i.node.level-1)*c(h)}px`,height:i.itemSize+"px"})},[c(b)?(ne(),ge(c(xt),{key:0,class:de([c(o).is("leaf",!!((L=i.node)!=null&&L.isLeaf)),c(o).is("hidden",i.hiddenExpandIcon),{expanded:!((S=i.node)!=null&&S.isLeaf)&&i.expanded},c(o).be("node","expand-icon")]),onClick:he(d,["stop"])},{default:be(()=>[(ne(),ge(Oe(c(b))))]),_:1},8,["class","onClick"])):Pe("v-if",!0),i.showCheckbox?(ne(),ge(c(Kt),{key:1,"model-value":i.checked,indeterminate:i.indeterminate,disabled:i.disabled,onChange:u,onClick:he(()=>{},["stop"])},null,8,["model-value","indeterminate","disabled","onClick"])):Pe("v-if",!0),lt(c(pl),{node:i.node},null,8,["node"])],6)],42,["aria-expanded","aria-disabled","aria-checked","data-key","onClick","onDragover","onDragenter","onDrop"])}}});var ml=tt(yl,[["__file","tree-node.vue"]]);const kl=ue({name:"ElTreeV2"}),Cl=ue({...kl,props:cl,emits:dl,setup(l,{expose:n,emit:s}){const t=l,o=Mt(),h=A(()=>t.itemSize);He(Be,{ctx:{emit:s,slots:o},props:t,instance:De()}),He(It,void 0);const{t:b}=_t(),v=Ne("tree"),{flattenTree:g,isNotEmpty:r,listRef:d,toggleExpand:u,isExpanded:O,isIndeterminate:i,isChecked:y,isDisabled:T,isCurrent:L,isForceHiddenExpandIcon:S,handleNodeClick:z,handleNodeDrop:m,handleNodeCheck:p,toggleCheckbox:M,getCurrentNode:C,getCurrentKey:x,setCurrentKey:B,getCheckedKeys:V,getCheckedNodes:F,getHalfCheckedKeys:P,getHalfCheckedNodes:W,setChecked:Q,setCheckedKeys:Z,filter:le,setData:e,getNode:_,expandNode:N,collapseNode:H,setExpandedKeys:U,scrollToNode:j,scrollTo:se}=vl(t,s);return n({toggleCheckbox:M,getCurrentNode:C,getCurrentKey:x,setCurrentKey:B,getCheckedKeys:V,getCheckedNodes:F,getHalfCheckedKeys:P,getHalfCheckedNodes:W,setChecked:Q,setCheckedKeys:Z,filter:le,setData:e,getNode:_,expandNode:N,collapseNode:H,setExpandedKeys:U,scrollToNode:j,scrollTo:se}),(f,w)=>(ne(),xe("div",{class:de([c(v).b(),{[c(v).m("highlight-current")]:f.highlightCurrent}]),role:"tree"},[c(r)?(ne(),ge(c(sl),{key:0,ref_key:"listRef",ref:d,"class-name":c(v).b("virtual-list"),data:c(g),total:c(g).length,height:f.height,"item-size":c(h),"perf-mode":f.perfMode},{default:be(({data:k,index:K,style:I})=>[(ne(),ge(ml,{key:k[K].key,style:at(I),node:k[K],expanded:c(O)(k[K]),"show-checkbox":f.showCheckbox,checked:c(y)(k[K]),indeterminate:c(i)(k[K]),"item-size":c(h),disabled:c(T)(k[K]),current:c(L)(k[K]),"hidden-expand-icon":c(S)(k[K]),onClick:c(z),onToggle:c(u),onCheck:c(p),onDrop:c(m)},null,8,["style","node","expanded","show-checkbox","checked","indeterminate","item-size","disabled","current","hidden-expand-icon","onClick","onToggle","onCheck","onDrop"]))]),_:1},8,["class-name","data","total","height","item-size","perf-mode"])):(ne(),xe("div",{key:1,class:de(c(v).e("empty-block"))},[Ke(f.$slots,"empty",{},()=>{var k;return[Ae("span",{class:de(c(v).e("empty-text"))},nt((k=f.emptyText)!=null?k:c(b)("el.tree.emptyText")),3)]})],2))],2))}});var bl=tt(Cl,[["__file","tree.vue"]]);const Sl=Lt(bl);function Nl(l,n,s){const t=[],o=[];return Dt(l,h=>{t.push(h[n]),o.push(h)},s),[t,o]}function El(l,n,s,t,o,h,b){const v=[];if(ce(n)||!n.length)return v;const g=h?h.map(O=>O[s]):[],r=b?b.map(O=>O[s]):[],[d,u]=Nl(l,s,o);return n.forEach(O=>{const i=g.indexOf(O);let y=h&&i!==-1?h[i]:void 0;if(i===-1&&b){const T=r.indexOf(O);T!==-1&&(y=b[T])}if(!y&&l){const T=d.indexOf(O);T!==-1&&(y=u[T])}v.push({value:O,label:y?y[t]:String(O)})}),v}function Le(l,n,s,t,o,h,b){const v=[];return ce(n)||!n.length||l&&l.forEach(g=>{const r=g[s],d=g[o],u=n.includes(r);if(h)u&&v.push({value:r,label:g[t],hide:b}),Le(d,n,s,t,o,h,u?!0:b).forEach(O=>{v.push(O)});else{const O=!!(d&&d.length);u&&v.push({value:r,label:g[t],hide:O}),O&&Le(d,n,s,t,o,h).forEach(i=>{v.push(i)})}}),v}function Tl(l,n,s,t,o){const h=l.map(v=>v.value),b=o?o.map(v=>v[s]):[];return n.forEach(v=>{if(!h.includes(v)){const g=b.indexOf(v),r=o&&g!==-1?o[g]:void 0;l.push({value:v,label:r?r[t]:String(v)})}}),l}function pt(l,n,s,t,o){return!l||!l.length||!n||!n.length?!1:l.every(h=>h[o]||n.includes(h[s])?!0:h[t]&&h[t].length?pt(h[t],n,s,t,o):!1)}function ve(l,n,s){if(!s)return l;const t=[];return n.forEach(o=>{o.hide||t.push(o.value)}),t}const Ol={modelValue:{type:[String,Number,Boolean,Array],default:()=>null},multiple:Boolean,disabled:Boolean,size:String,clearable:Boolean,placeholder:String,cacheData:Array,treeProps:{type:Object,required:!0},showCheckedStrategy:String,checkedValueStrategy:Boolean,maxTagCount:Number,maxTagTextLength:Number,tagType:{type:String,default:"info"},automaticDropdown:Boolean,filterable:Boolean,teleported:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},placement:{type:String,default:"bottom-start"},transition:{type:String,default:"el-zoom-in-top"},popperOptions:Object,popperClass:String,popperWidth:[Number,String],selectStyle:Object,inputStyle:Object,selectTagsStyle:Object},wl={"update:modelValue":l=>!0,change:l=>!0,visibleChange:l=>!0,removeTag:l=>!0,clear:()=>!0,focus:l=>!0,blur:l=>!0},xl=["title"],Il=ue({name:"EleTreeSelect",__name:"index",props:Ol,emits:wl,setup(l,{expose:n,emit:s}){const t=l,o=s,{validateChange:h}=Rt(),{optionData:b,reloadOptions:v}=At(t,"treeProps.data"),g=G(null),r=G(null),d=G(!1),u=G([]),O=A(()=>{const e=u.value;return!t.multiple&&e.length?e[0].label:""}),i=A(()=>{const e=["ele-tree-select-popper"];return t.popperClass&&e.push(t.popperClass),e.join(" ")}),y=A(()=>{var e;return Object.assign({value:"id",label:"label",children:"children",disabled:"disabled"},(e=t.treeProps)==null?void 0:e.props)}),T=()=>{g.value&&g.value.updatePopper()},L=e=>{if(ce(e))return;const _=y.value.value;if(t.cacheData!=null){const N=t.cacheData.find(H=>H[_]===e);if(N!=null)return N}if(b.value)return Pt(b.value,N=>N[_]===e,y.value.children)},S=e=>{var _;const N=y.value.value,H=y.value.label;return(_=t.treeProps)!=null&&_.checkStrictly||t.showCheckedStrategy==="all"?El(b.value,e,N,H,y.value.children,t.cacheData,r.value?r.value.getCheckedNodes():void 0):Tl(Le(b.value,e,N,H,y.value.children,t.showCheckedStrategy!=="child"),e,N,H,t.cacheData)},z=e=>{if(!t.multiple){const N=u.value[0];if(ce(e)){if(!N)return;u.value=[],r.value&&r.value.setCurrentKey(null);return}if(N&&N.value===e)return;const H=L(e),U=y.value.label,j=H?H[U]:String(e);u.value=[{label:j,value:e}],r.value&&r.value.setCurrentKey(e);return}if(ce(e)||!e.length){if(!u.value.length)return;u.value=[],r.value&&r.value.setCheckedKeys([]);return}const _=u.value.map(N=>N.value);je(e,_,!0)&&(r.value&&r.value.setCheckedKeys(e),u.value=S(e))},m=(e,_)=>{const N=_[y.value.label];return N!=null&&N.includes(e)},p=e=>{r.value&&r.value.filter(e)},M=()=>{g.value&&g.value.focusSearchInput()},C=e=>{je(e,t.modelValue,t.multiple)&&(o("update:modelValue",e),h(),o("change",e))},x=e=>{e&&p(""),d.value!==e&&(d.value=e,o("visibleChange",e))},B=e=>{r.value&&r.value.setChecked(e.value,!1);const _=r.value&&r.value.getCheckedKeys()||[];u.value=S(_),C(ve(_,u.value,t.checkedValueStrategy)),o("removeTag",e.value)},V=()=>{C(t.multiple?[]:null),x(!1),o("clear")},F=e=>{o("focus",e)},P=e=>{o("blur",e)},W=(e,_,N)=>{var H,U,j;N.stopPropagation();const se=y.value.value,f=y.value.children,w=y.value.disabled,k=e[w];if(k){const $=N.target;if($&&$.classList.contains("is-disabled")){const q=(H=$.parentNode)==null?void 0:H.parentNode;q&&q.blur()}}const K=e[se],I=e[y.value.label],D=!((U=e[f])!=null&&U.length),R=((j=t.treeProps)==null?void 0:j.expandOnClickNode)!==!1;if(M(),!t.multiple){const $=u.value[0];if($&&$.value===K){(!R||D)&&x(!1);return}if(!k&&(!R||D)){u.value=[{label:I,value:K}],C(K),x(!1);return}ie(()=>{const q=t.modelValue,a=ce(q)?null:q;r.value&&r.value.setCurrentKey(a)});return}if(!k&&(!R||D)){const $=t.modelValue,q=$&&$.includes(K);if(r.value)if(q)r.value.setChecked(K,!1);else if(D)r.value.setChecked(K,!q);else{const E=pt(e[f],$,se,f,w);r.value.setChecked(K,!E)}const a=r.value&&r.value.getCheckedKeys()||[];u.value=S(a),C(ve(a,u.value,t.checkedValueStrategy))}},Q=()=>{const e=r.value&&r.value.getCheckedKeys()||[];u.value=S(e),C(ve(e,u.value,t.checkedValueStrategy)),M()},Z=()=>{M()},le=()=>{M()};return re(()=>t.modelValue,e=>{z(e)},{deep:!0}),re([()=>t.cacheData,b],()=>{if(u.value.length){if(!t.multiple){const e=L(t.modelValue),_=t.modelValue,N=e?e[y.value.label]:String(_);u.value=[{label:N,value:_}];return}u.value=S(t.modelValue)}},{deep:!0}),re([()=>t.showCheckedStrategy,()=>{var e;return(e=t.treeProps)==null?void 0:e.checkStrictly}],()=>{if(t.multiple&&!ce(t.modelValue)&&t.modelValue.length)if(t.checkedValueStrategy){const e=r.value&&r.value.getCheckedKeys()||[];u.value=S(e),C(ve(e,u.value,t.checkedValueStrategy))}else{const e=t.modelValue;u.value=S(e),C(ve(e,u.value,t.checkedValueStrategy))}}),re(()=>t.checkedValueStrategy,()=>{if(!t.multiple)return;const e=r.value&&r.value.getCheckedKeys()||[];C(ve(e,u.value,t.checkedValueStrategy))}),re(()=>t.disabled,e=>{e&&x(!1)}),Ze(()=>{!ce(t.modelValue)&&!(t.multiple&&!t.modelValue.length)&&z(t.modelValue)}),n({reloadOptions:v,selectRef:g,treeRef:r,selectedItems:u,selectedLabel:O,updatePopover:T,updateVisible:x}),(e,_)=>(ne(),ge(Ht,{ref_key:"selectRef",ref:g,value:e.modelValue,multiple:e.multiple,disabled:e.disabled,size:e.size,clearable:e.clearable,placeholder:e.placeholder,maxTagCount:e.maxTagCount,maxTagTextLength:e.maxTagTextLength,tagType:e.tagType,automaticDropdown:e.automaticDropdown,filterable:e.filterable,teleported:e.teleported,persistent:e.persistent,placement:e.placement,transition:e.transition,popperWidth:e.popperWidth,popperOptions:e.popperOptions,popperClass:i.value,selectStyle:e.selectStyle,inputStyle:e.inputStyle,selectTagsStyle:e.selectTagsStyle,selectedLabel:O.value,selected:u.value.filter(N=>!N.hide),visible:d.value,"onUpdate:visible":x,onFilterChange:p,onRemoveTag:B,onClear:V,onFocus:F,onBlur:P},Bt({default:be(()=>[lt(c(Sl),Vt({itemSize:32,filterMethod:m},c(zt)(e.treeProps,["data"]),{ref_key:"treeRef",ref:r,data:c(b),props:y.value,highlightCurrent:!e.multiple,showCheckbox:!!e.multiple,checkOnClickNode:!1,defaultCheckedKeys:e.multiple?e.modelValue:void 0,onCheck:Q,onNodeClick:W,onNodeExpand:Z,onNodeCollapse:le}),{default:be(N=>[Ae("span",{class:de(["el-tree-node__label",{"is-disabled":N.node.disabled}]),title:N.node.label},[Ke(e.$slots,"default",$e(We(N||{})),()=>[Ft(nt(N.node.label),1)])],10,xl)]),_:3},16,["data","props","highlightCurrent","showCheckbox","defaultCheckedKeys"])]),_:2},[e.$slots.maxTagPlaceholder?{name:"maxTagPlaceholder",fn:be(N=>[Ke(e.$slots,"maxTagPlaceholder",$e(We(N||{})))]),key:"0"}:void 0]),1032,["value","multiple","disabled","size","clearable","placeholder","maxTagCount","maxTagTextLength","tagType","automaticDropdown","filterable","teleported","persistent","placement","transition","popperWidth","popperOptions","popperClass","selectStyle","inputStyle","selectTagsStyle","selectedLabel","selected","visible"]))}});export{Il as _};
