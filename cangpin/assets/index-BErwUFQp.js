import{_ as V}from"./index-DTO-nUKg.js";import{d as R,cm as N,r as b,q as U,o as d,b as l,w as t,az as B,i as r,l as I,c as _,a6 as M,f as P,aE as O,gO as q,gP as z,gQ as W,aR as J,bP as L,a as j,K as A,S as D,u as K,e as h,a7 as Q,c2 as F,cb as G,gR as H,gS as X,p as Y}from"./index-CifDuRKA.js";import{_ as Z}from"./index-DfazNGs9.js";import{_ as S}from"./index-C02xlazK.js";import"./index-nF8yHkQf.js";import"./index-DUd4dYFp.js";import"./index-G6TwFlU2.js";import"./virtual-list-CuBNNQah.js";import"./index-Br8TiUiO.js";import"./index-B72mtQJ5.js";import"./isArrayLikeObject-DiBiimoh.js";import"./vuedraggable.umd-BrKXWqaO.js";const ee=R({__name:"message-notice",emits:["reload"],setup(E,{emit:x}){const w=x,i=N({inner:!0}),p=b(null),g=b([{type:"selection",columnKey:"selection",width:50,align:"center",fixed:"left"},{type:"index",columnKey:"index",width:50,align:"center",fixed:"left"},{prop:"title",label:"通知标题",minWidth:220},{prop:"time",label:"通知时间",width:180,align:"center"},{prop:"status",label:"状态",width:90,align:"center",slot:"status",formatter:o=>o.status==0?"未确认":"已确认"},{columnKey:"action",label:"操作",width:120,align:"center",slot:"action",hideInPrint:!0,hideInExport:!0}]),a=b([]),y=({pages:o,where:e,orders:n})=>q({...e,...n,...o}),u=o=>{if(!(o==null?a.value:[o]).length){i.error("请至少选择一条数据");return}i.success("点击了确认"),c()},f=o=>{if(!(o==null?a.value:[o]).length){i.error("请至少选择一条数据");return}i.error("点击了删除")},c=()=>{w("reload")};return(o,e)=>{const n=O,v=P,k=B,C=I,$=S;return d(),U("div",null,[l($,{ref_key:"tableRef",ref:p,"row-key":"id",columns:g.value,datasource:y,"show-overflow-tooltip":!0,selections:a.value,"onUpdate:selections":e[2]||(e[2]=s=>a.value=s),"highlight-current-row":!0,"export-config":{fileName:"系统通知数据"}},{toolbar:t(()=>[l(n,{type:"primary",class:"ele-btn-icon",onClick:e[0]||(e[0]=s=>u())},{default:t(()=>e[3]||(e[3]=[r(" 批量确认 ")])),_:1}),l(n,{type:"danger",class:"ele-btn-icon",onClick:e[1]||(e[1]=s=>f())},{default:t(()=>e[4]||(e[4]=[r(" 删除通知 ")])),_:1})]),status:t(({row:s})=>[s.status===0?(d(),_(v,{key:0,type:"warning"},{default:t(()=>e[5]||(e[5]=[r("未确认")])),_:1})):s.status===1?(d(),_(v,{key:1,type:"info"},{default:t(()=>e[6]||(e[6]=[r("已确认")])),_:1})):M("",!0)]),action:t(({row:s})=>[l(k,{type:"primary",underline:!1,onClick:m=>u(s)},{default:t(()=>e[7]||(e[7]=[r(" 确认 ")])),_:2},1032,["onClick"]),l(C,{direction:"vertical"}),l(k,{type:"danger",underline:!1,onClick:m=>f(s)},{default:t(()=>e[8]||(e[8]=[r(" 删除 ")])),_:2},1032,["onClick"])]),_:1},8,["columns","selections"])])}}}),te=R({__name:"message-letter",emits:["reload"],setup(E,{emit:x}){const w=x,i=N({inner:!0}),p=b(null),g=b([{type:"selection",columnKey:"selection",width:50,align:"center",fixed:"left"},{type:"index",columnKey:"index",width:50,align:"center",fixed:"left"},{prop:"title",label:"私信内容",minWidth:220},{prop:"time",label:"发送时间",width:180,align:"center"},{prop:"status",label:"状态",width:100,align:"center",slot:"status",formatter:e=>e.status==0?"未读":"已读"},{columnKey:"action",label:"操作",width:120,align:"center",slot:"action",hideInPrint:!0,hideInExport:!0}]),a=b([]),y=({pages:e,where:n,orders:v})=>z({...n,...v,...e}),u=e=>{console.log(JSON.parse(JSON.stringify(e))),i.success("点击了回复")},f=e=>{if(!(e==null?a.value:[e]).length){i.error("请至少选择一条数据");return}i.error("点击了删除")},c=()=>{if(!a.value.length){i.error("请至少选择一条数据");return}i.success("点击了标记已读"),o()},o=()=>{w("reload")};return(e,n)=>{const v=O,k=P,C=B,$=I,s=S;return d(),U("div",null,[l(s,{ref_key:"tableRef",ref:p,"row-key":"id",columns:g.value,datasource:y,"show-overflow-tooltip":!0,selections:a.value,"onUpdate:selections":n[1]||(n[1]=m=>a.value=m),"highlight-current-row":!0,"export-config":{fileName:"用户私信数据"}},{toolbar:t(()=>[l(v,{type:"primary",class:"ele-btn-icon",onClick:c},{default:t(()=>n[2]||(n[2]=[r(" 标记已读 ")])),_:1}),l(v,{type:"danger",class:"ele-btn-icon",onClick:n[0]||(n[0]=m=>f())},{default:t(()=>n[3]||(n[3]=[r(" 删除消息 ")])),_:1})]),status:t(({row:m})=>[m.status===0?(d(),_(k,{key:0,type:"warning"},{default:t(()=>n[4]||(n[4]=[r("未读")])),_:1})):m.status===1?(d(),_(k,{key:1,type:"info"},{default:t(()=>n[5]||(n[5]=[r("已读")])),_:1})):M("",!0)]),action:t(({row:m})=>[l(C,{type:"primary",underline:!1,onClick:T=>u(m)},{default:t(()=>n[6]||(n[6]=[r(" 回复 ")])),_:2},1032,["onClick"]),l($,{direction:"vertical"}),l(C,{type:"danger",underline:!1,onClick:T=>f(m)},{default:t(()=>n[7]||(n[7]=[r(" 删除 ")])),_:2},1032,["onClick"])]),_:1},8,["columns","selections"])])}}}),ne=R({__name:"message-todo",emits:["reload"],setup(E,{emit:x}){const w=x,i=N({inner:!0}),p=b(null),g=b([{type:"selection",columnKey:"selection",width:50,align:"center",fixed:"left"},{type:"index",columnKey:"index",width:50,align:"center",fixed:"left"},{prop:"title",label:"待办内容",minWidth:220},{prop:"time",label:"结束时间",width:180,align:"center"},{prop:"status",label:"状态",width:90,align:"center",slot:"status",formatter:o=>o.status==0?"未完成":"已完成"},{columnKey:"action",label:"操作",width:120,align:"center",slot:"action",hideInPrint:!0,hideInExport:!0}]),a=b([]),y=({pages:o,where:e,orders:n})=>W({...e,...n,...o}),u=o=>{if(!(o==null?a.value:[o]).length){i.error("请至少选择一条数据");return}i.success("点击了完成"),c()},f=o=>{if(!(o==null?a.value:[o]).length){i.error("请至少选择一条数据");return}i.error("点击了删除")},c=()=>{w("reload")};return(o,e)=>{const n=O,v=P,k=B,C=I,$=S;return d(),U("div",null,[l($,{ref_key:"tableRef",ref:p,"row-key":"id",columns:g.value,datasource:y,"show-overflow-tooltip":!0,selections:a.value,"onUpdate:selections":e[2]||(e[2]=s=>a.value=s),"highlight-current-row":!0,"export-config":{fileName:"待办事项数据"}},{toolbar:t(()=>[l(n,{type:"primary",class:"ele-btn-icon",onClick:e[0]||(e[0]=s=>u())},{default:t(()=>e[3]||(e[3]=[r(" 批量完成 ")])),_:1}),l(n,{type:"danger",class:"ele-btn-icon",onClick:e[1]||(e[1]=s=>f())},{default:t(()=>e[4]||(e[4]=[r(" 删除待办 ")])),_:1})]),status:t(({row:s})=>[s.status===0?(d(),_(v,{key:0,type:"warning"},{default:t(()=>e[5]||(e[5]=[r("未完成")])),_:1})):s.status===1?(d(),_(v,{key:1,type:"info"},{default:t(()=>e[6]||(e[6]=[r("已完成")])),_:1})):M("",!0)]),action:t(({row:s})=>[l(k,{type:"primary",underline:!1,onClick:m=>u(s)},{default:t(()=>e[7]||(e[7]=[r(" 完成 ")])),_:2},1032,["onClick"]),l(C,{direction:"vertical"}),l(k,{type:"danger",underline:!1,onClick:m=>f(s)},{default:t(()=>e[8]||(e[8]=[r(" 删除 ")])),_:2},1032,["onClick"])]),_:1},8,["columns","selections"])])}}}),oe={class:"message-side"},se={class:"message-body"},le=R({name:"UserMessage",__name:"index",setup(E){const x=N({inner:!0}),{currentRoute:w}=J(),{mobile:i}=L(),p=b("notice"),g=j({notice:0,letter:0,todo:0}),a=A(()=>[{index:"notice",path:"/user/message?type=notice",title:"系统通知",badge:{value:g.notice}},{index:"letter",path:"/user/message?type=letter",title:"用户私信",badge:{value:g.letter}},{index:"todo",path:"/user/message?type=todo",title:"待办事项",badge:{value:g.todo}}]);D(w,u=>{const{path:f,query:c}=K(u);if(f==="/user/message"){const o="notice";c.type?typeof c.type=="string"?p.value=c.type:c.type.length&&c.type[0]?p.value=c.type[0]:p.value=o:p.value=o}},{immediate:!0});const y=()=>{X().then(u=>{Object.assign(g,u)}).catch(u=>{x.error(u.message)})};return y(),(u,f)=>{const c=F,o=Z,e=V;return d(),_(e,{"multi-card":!1},{default:t(()=>[l(o,{"body-style":{padding:0}},{default:t(()=>[h("div",{class:Q(["message-wrapper",{"is-mobile":K(i)}])},[h("div",oe,[l(c,{items:a.value,"default-active":p.value,mode:K(i)?"horizontal":"vertical"},null,8,["items","default-active","mode"])]),h("div",se,[l(G,{name:"slide-right",mode:"out-in"},{default:t(()=>[(d(),_(H,null,[p.value=="notice"?(d(),_(ee,{key:0,onReload:y})):p.value=="todo"?(d(),_(ne,{key:1,onReload:y})):(d(),_(te,{key:2,onReload:y}))],1024))]),_:1})])],2)]),_:1})]),_:1})}}}),ve=Y(le,[["__scopeId","data-v-b5720949"]]);export{ve as default};
