import{d as Y,r as c,K as p,S as R,c as d,o as t,w as s,e as Z,a8 as w,a7 as _,b,q as h,a6 as f,u as i,aK as D,d6 as j,aJ as x,E as F,aN as ee,a2 as m,bg as le,bb as ae,F as V,v as te,m as L,i as E,t as N,es as se,g as ie}from"./index-BUAqAxXK.js";const ne={value:{type:[String,Number,Boolean,Array],default:()=>null},multiple:Boolean,disabled:Boolean,size:String,clearable:Boolean,placeholder:String,selectedLabel:String,selected:Array,maxTagCount:Number,maxTagTextLength:Number,tagType:String,automaticDropdown:Boolean,filterable:Boolean,visible:Boolean,teleported:Boolean,persistent:Boolean,placement:String,transition:{type:String,default:"el-fade-in-linear"},popperOptions:Object,popperClass:String,popperWidth:[Number,String],selectClass:String,selectStyle:Object,inputStyle:Object,selectTagsStyle:Object},re={"update:visible":r=>!0,removeTag:r=>!0,clear:()=>!0,focus:r=>!0,blur:r=>!0,filterChange:r=>!0},pe=Y({name:"EleBasicSelect",__name:"index",props:ne,emits:re,setup(r,{expose:U,emit:W}){const l=r,n=W,v=c(null),T=c(null),C=c(null),g=c(l.multiple||!l.selectedLabel?"":l.selectedLabel),S=c(""),o=p(()=>l.multiple?!Array.isArray(l.value)||!l.value.length:l.value==null||l.value===""),I=p(()=>{const e=o.value&&l.placeholder?l.placeholder:"";return!l.filterable||!l.visible||l.multiple?e:l.selectedLabel||e}),z=p(()=>typeof l.maxTagCount=="number"&&l.selected!=null&&l.selected.length>l.maxTagCount),$=p(()=>!z.value||o.value||l.selected==null?l.selected||[]:l.selected.slice(0,l.maxTagCount)),O=p(()=>!z.value||o.value||l.selected==null?[]:l.selected.slice(l.maxTagCount)),k=p(()=>o.value||l.maxTagCount==null||l.maxTagCount<0?0:l.value.length-l.maxTagCount),q=()=>{v.value&&v.value.updatePopper()},B=e=>{if(l.filterable&&l.visible){if(e!=null&&e.target!=null){const a=e.target;if(a.nodeName&&a.nodeName.toLowerCase()==="input")return}const u=l.multiple?C.value:T.value;u&&u.focus()}},P=e=>{l.filterable&&l.visible&&l.multiple&&(S.value=e,n("filterChange",e))},A=e=>{l.filterable&&l.visible&&!l.multiple&&(g.value=e,n("filterChange",e))},y=e=>{(!l.disabled||!e)&&n("update:visible",e)},J=e=>{l.disabled||n("removeTag",e)},M=()=>{n("clear")},G=e=>{l.automaticDropdown&&l.visible&&e.stopPropagation()},H=e=>{l.automaticDropdown&&!l.visible&&y(!0),n("focus",e)},Q=e=>{n("blur",e)},K=e=>{!l.disabled&&l.visible&&(e.stopPropagation(),e.preventDefault(),y(!1))};return R(()=>l.selectedLabel,e=>{(!l.filterable||!l.visible)&&(g.value=l.multiple||!e?"":e)}),R(()=>l.visible,e=>{if(l.filterable)if(l.multiple)S.value="",e&&B();else{const u=l.selectedLabel;g.value=e||!u?"":u}}),U({tooltipRef:v,inputRef:T,searchRef:C,currentTags:$,omittedTags:O,omittedSize:k,updatePopper:q,focusSearchInput:B,updateSearchValue:P,updateInputValue:A,updateVisible:y}),(e,u)=>(t(),d(ie,{ref_key:"tooltipRef",ref:v,trigger:"click",visible:e.visible,disabled:e.disabled,placement:e.placement,teleported:e.teleported,width:e.popperWidth,popperClass:e.popperClass,popperOptions:e.popperOptions,transition:e.transition,gpuAcceleration:e.transition==="el-fade-in-linear",effect:"light",persistent:!0,isPopover:!0,triggerKeys:[],"onUpdate:visible":y},{body:s(()=>[e.persistent||e.visible?(t(),d(se,{key:0,class:"ele-popover-body",onClick:B},{default:s(()=>[m(e.$slots,"default")]),_:3})):f("",!0)]),default:s(()=>[Z("div",{class:_(["ele-select",e.selectClass,{"is-empty":o.value},{"is-multiple":e.multiple},{"is-disabled":e.disabled},{"is-filterable":e.filterable},{"is-small":e.size==="small"},{"is-large":e.size==="large"},{"is-opened":e.visible}]),style:w(e.selectStyle)},[b(i(D),{ref_key:"inputRef",ref:T,size:e.size,disabled:e.disabled,validateEvent:!1,modelValue:g.value,placeholder:e.filterable&&e.multiple&&e.visible?"":I.value,readonly:!e.filterable||!e.visible||e.multiple,style:w(e.inputStyle),"onUpdate:modelValue":A,onClick:G,onFocus:H,onBlur:Q,onKeydown:j(K,["esc"])},x({suffix:s(()=>[e.clearable&&!e.disabled&&!o.value?(t(),d(i(F),{key:0,class:"ele-select-clear el-input__icon",onClick:ee(M,["stop"])},{default:s(()=>[m(e.$slots,"clearIcon",{},()=>[b(i(le))])]),_:3})):f("",!0),b(i(F),{class:"ele-select-arrow el-input__icon"},{default:s(()=>[m(e.$slots,"suffixIcon",{visible:e.visible},()=>[b(i(ae))])]),_:3})]),_:2},[e.$slots.prefix?{name:"prefix",fn:s(()=>[m(e.$slots,"prefix")]),key:"0"}:void 0]),1032,["size","disabled","modelValue","placeholder","readonly","style"]),e.multiple?(t(),h("div",{key:0,class:"ele-select-tags",style:w(e.selectTagsStyle)},[(t(!0),h(V,null,te($.value,(a,X)=>(t(),d(i(L),{key:X+"-"+a.value,size:e.size,type:e.tagType,closable:!e.disabled,disableTransitions:!0,title:a.label,onClose:oe=>J(a)},{default:s(()=>[a.label&&e.maxTagTextLength&&a.label.length>e.maxTagTextLength?(t(),h(V,{key:0},[E(N(a.label.slice(0,e.maxTagTextLength))+"... ",1)],64)):(t(),h(V,{key:1},[E(N(a.label),1)],64))]),_:2},1032,["size","type","closable","title","onClose"]))),128)),z.value?(t(),d(i(L),{key:0,size:e.size,type:e.tagType,disableTransitions:!0},{default:s(()=>[m(e.$slots,"maxTagPlaceholder",{omittedValues:O.value,omittedSize:k.value},()=>[E(" +"+N(k.value),1)])]),_:3},8,["size","type"])):f("",!0),!e.disabled&&e.filterable?(t(),d(i(L),{key:1,size:e.size,disableTransitions:!0,class:"ele-select-search"},{default:s(()=>[b(i(D),{ref_key:"searchRef",ref:C,size:e.size,validateEvent:!1,modelValue:S.value,placeholder:I.value,"onUpdate:modelValue":P,onKeydown:j(K,["esc"])},null,8,["size","modelValue","placeholder"])]),_:1},8,["size"])):f("",!0)],4)):f("",!0)],6)]),_:3},8,["visible","disabled","placement","teleported","width","popperClass","popperOptions","transition","gpuAcceleration"]))}});export{pe as _};
