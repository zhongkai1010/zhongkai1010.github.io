import{cc as k,R as J,K as d,ex as Q,a3 as N,ey as m,c2 as g,cA as ee,d as te,a1 as F,r as B,a as ne,ez as re,u as p,S as ae,L as se,N as P,aN as oe}from"./index-Dc28eGuE.js";const le=e=>k?window.requestAnimationFrame(e):setTimeout(e,16),ie=e=>k?window.cancelAnimationFrame(e):clearTimeout(e);var G=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function ce(e,t){return!!(e===t||G(e)&&G(t))}function ue(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!ce(e[r],t[r]))return!1;return!0}function de(e,t){t===void 0&&(t=ue);var r=null;function i(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];if(r&&r.lastThis===this&&t(a,r.lastArgs))return r.lastResult;var c=e.apply(this,a);return r={lastResult:c,lastArgs:a,lastThis:this},c}return i.clear=function(){r=null},i}const Re=()=>{const t=J().proxy.$props;return d(()=>{const r=(i,a,s)=>({});return t.perfMode?Q(r):de(r)})},Le=50,Ae="itemRendered",we="scroll",me="forward",fe="backward",Me="auto",_e="smart",ze="start",Ce="center",Ie="end",T="horizontal",q="vertical",ve="ltr",H="rtl",he="negative",ge="positive-ascending",Se="positive-descending",ye={[T]:"left",[q]:"top"},be=20,A=m({type:g([Number,Function]),required:!0}),w=m({type:Number}),M=m({type:Number,default:2}),pe=m({type:String,values:["ltr","rtl"],default:"ltr"}),_=m({type:Number,default:0}),E=m({type:Number,required:!0}),$=m({type:String,values:["horizontal","vertical"],default:q}),V=N({className:{type:String,default:""},containerElement:{type:g([String,Object]),default:"div"},data:{type:g(Array),default:()=>ee([])},direction:pe,height:{type:[String,Number],required:!0},innerElement:{type:[String,Object],default:"div"},style:{type:g([Object,String,Array])},useIsScrolling:{type:Boolean,default:!1},width:{type:[Number,String],required:!1},perfMode:{type:Boolean,default:!0},scrollbarAlwaysOn:{type:Boolean,default:!1}}),xe=N({cache:M,estimatedItemSize:w,layout:$,initScrollOffset:_,total:E,itemSize:A,...V}),z={type:Number,default:6},K={type:Number,default:0},j={type:Number,default:2},Oe=N({columnCache:M,columnWidth:A,estimatedColumnWidth:w,estimatedRowHeight:w,initScrollLeft:_,initScrollTop:_,itemKey:{type:g(Function),default:({columnIndex:e,rowIndex:t})=>`${t}:${e}`},rowCache:M,rowHeight:A,totalColumn:E,totalRow:E,hScrollbarSize:z,vScrollbarSize:z,scrollbarStartGap:K,scrollbarEndGap:j,role:String,...V}),Te=N({alwaysOn:Boolean,class:String,layout:$,total:E,ratio:{type:Number,required:!0},clientSize:{type:Number,required:!0},scrollFrom:{type:Number,required:!0},scrollbarSize:z,startGap:K,endGap:j,visible:Boolean}),De=(e,t)=>e<t?me:fe,Fe=e=>e===ve||e===H||e===T,Be=e=>e===H;let v=null;function Pe(e=!1){if(v===null||e){const t=document.createElement("div"),r=t.style;r.width="50px",r.height="50px",r.overflow="scroll",r.direction="rtl";const i=document.createElement("div"),a=i.style;return a.width="100px",a.height="100px",t.appendChild(i),document.body.appendChild(t),t.scrollLeft>0?v=Se:(t.scrollLeft=1,t.scrollLeft===0?v=he:v=ge),document.body.removeChild(t),v}return v}function Ee({move:e,size:t,bar:r},i){const a={},s=`translate${r.axis}(${e}px)`;return a[r.size]=t,a.transform=s,a.msTransform=s,a.webkitTransform=s,i==="horizontal"?a.height="100%":a.width="100%",a}const Ge=te({name:"ElVirtualScrollBar",props:Te,emits:["scroll","start-move","stop-move"],setup(e,{emit:t}){const r=d(()=>e.startGap+e.endGap),i=F("virtual-scrollbar"),a=F("scrollbar"),s=B(),c=B();let C=null,R=null;const l=ne({isDragging:!1,traveled:0}),o=d(()=>re[e.layout]),I=d(()=>e.clientSize-p(r)),U=d(()=>({position:"absolute",width:`${T===e.layout?I.value:e.scrollbarSize}px`,height:`${T===e.layout?e.scrollbarSize:I.value}px`,[ye[e.layout]]:"2px",right:"2px",bottom:"2px",borderRadius:"4px"})),L=d(()=>{const n=e.ratio,u=e.clientSize;if(n>=100)return Number.POSITIVE_INFINITY;if(n>=50)return n*u/100;const f=u/3;return Math.floor(Math.min(Math.max(n*u,be),f))}),W=d(()=>{if(!Number.isFinite(L.value))return{display:"none"};const n=`${L.value}px`;return Ee({bar:o.value,size:n,move:l.traveled},e.layout)}),h=d(()=>Math.floor(e.clientSize-L.value-p(r))),Z=()=>{window.addEventListener("mousemove",y),window.addEventListener("mouseup",S);const n=p(c);n&&(R=document.onselectstart,document.onselectstart=()=>!1,n.addEventListener("touchmove",y,{passive:!0}),n.addEventListener("touchend",S))},x=()=>{window.removeEventListener("mousemove",y),window.removeEventListener("mouseup",S),document.onselectstart=R,R=null;const n=p(c);n&&(n.removeEventListener("touchmove",y),n.removeEventListener("touchend",S))},O=n=>{n.stopImmediatePropagation(),!(n.ctrlKey||[1,2].includes(n.button))&&(l.isDragging=!0,l[o.value.axis]=n.currentTarget[o.value.offset]-(n[o.value.client]-n.currentTarget.getBoundingClientRect()[o.value.direction]),t("start-move"),Z())},S=()=>{l.isDragging=!1,l[o.value.axis]=0,t("stop-move"),x()},y=n=>{const{isDragging:u}=l;if(!u||!c.value||!s.value)return;const f=l[o.value.axis];if(!f)return;ie(C);const b=(s.value.getBoundingClientRect()[o.value.direction]-n[o.value.client])*-1,X=c.value[o.value.offset]-f,D=b-X;C=le(()=>{l.traveled=Math.max(e.startGap,Math.min(D,h.value)),t("scroll",D,h.value)})},Y=n=>{const u=Math.abs(n.target.getBoundingClientRect()[o.value.direction]-n[o.value.client]),f=c.value[o.value.offset]/2,b=u-f;l.traveled=Math.max(0,Math.min(b,h.value)),t("scroll",b,h.value)};return ae(()=>e.scrollFrom,n=>{l.isDragging||(l.traveled=Math.ceil(n*h.value))}),se(()=>{x()}),()=>P("div",{role:"presentation",ref:s,class:[i.b(),e.class,(e.alwaysOn||l.isDragging)&&"always-on"],style:U.value,onMousedown:oe(Y,["stop","prevent"]),onTouchstartPrevent:O},P("div",{ref:c,class:a.e("thumb"),style:W.value,onMousedown:O},[]))}});export{Me as A,fe as B,Ce as C,Le as D,Ie as E,me as F,T as H,Ae as I,H as R,we as S,q as V,xe as a,Te as b,ie as c,Pe as d,ge as e,he as f,De as g,Ge as h,Be as i,Se as j,ze as k,_e as l,Fe as m,le as r,Re as u,Oe as v};
