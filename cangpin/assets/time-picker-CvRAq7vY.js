import{eM as ke,eN as H,eO as Z,eP as Se,eQ as Pe,dP as _e,a3 as Te,c4 as Ce,a5 as we,d as J,cr as De,a1 as z,P as Re,K as P,r as W,q as Ve,a6 as Ae,o as Oe,e as h,a7 as f,u as t,t as O,b as x,B as R,cd as xe,cM as U,a0 as Ee,bU as Me,aa as Ie}from"./index-Cam4GZdG.js";import{t as Ne,u as ye,a as Be,T as Q,b as He,c as Ue,d as Fe,D as Ke,C as Le,e as je}from"./date-picker-An1piYEh.js";import{b as $e,i as qe}from"./isArrayLikeObject-CREpILbu.js";function Ge(){}function Ye(s){return s!==s}function ze(s,r,o){for(var c=o-1,p=s.length;++c<p;)if(s[c]===r)return c;return-1}function Qe(s,r,o){return r===r?ze(s,r,o):ke(s,Ye,o)}function Ze(s,r){var o=s==null?0:s.length;return!!o&&Qe(s,r,0)>-1}var Je=1/0,We=H&&1/Z(new H([,-0]))[1]==Je?function(s){return new H(s)}:Ge,Xe=200;function en(s,r,o){var c=-1,p=Ze,b=s.length,a=!0,v=[],m=v;if(b>=Xe){var _=We(s);if(_)return Z(_);a=!1,p=Pe,m=new Se}else m=v;e:for(;++c<b;){var k=s[c],S=k;if(k=k!==0?k:0,a&&S===S){for(var V=m.length;V--;)if(m[V]===S)continue e;v.push(k)}else p(m,S,o)||(m!==v&&m.push(S),v.push(k))}return v}var F=$e(function(s){return en(_e(s,1,qe,!0))});const nn=Te({...Ne,parsedValue:{type:Ce(Array)}}),an=J({__name:"panel-time-range",props:nn,emits:["pick","select-range","set-picker-option"],setup(s,{emit:r}){const o=s,c=(e,n)=>{const l=[];for(let i=e;i<=n;i++)l.push(i);return l},{t:p,lang:b}=De(),a=z("time"),v=z("picker"),m=Re("EP_PICKER_BASE"),{arrowControl:_,disabledHours:k,disabledMinutes:S,disabledSeconds:V,defaultValue:E}=m.props,X=P(()=>[a.be("range-picker","body"),a.be("panel","content"),a.is("arrow",_),w.value?"has-seconds":""]),ee=P(()=>[a.be("range-picker","body"),a.be("panel","content"),a.is("arrow",_),w.value?"has-seconds":""]),T=P(()=>o.parsedValue[0]),C=P(()=>o.parsedValue[1]),ne=ye(o),ae=()=>{r("pick",ne.value,!1)},w=P(()=>o.format.includes("ss")),K=P(()=>o.format.includes("A")?"A":o.format.includes("a")?"a":""),te=(e=!1)=>{r("pick",[T.value,C.value],e)},se=e=>{L(e.millisecond(0),C.value)},oe=e=>{L(T.value,e.millisecond(0))},re=e=>{const n=e.map(i=>R(i).locale(b.value)),l=$(n);return n[0].isSame(l[0])&&n[1].isSame(l[1])},L=(e,n)=>{o.visible&&r("pick",[e,n],!0)},le=P(()=>T.value>C.value),A=W([0,2]),ie=(e,n)=>{r("select-range",e,n,"min"),A.value=[e,n]},j=P(()=>w.value?11:8),ce=(e,n)=>{r("select-range",e,n,"max");const l=t(j);A.value=[e+l,n+l]},ue=e=>{const n=w.value?[0,3,6,11,14,17]:[0,3,8,11],l=["hours","minutes"].concat(w.value?["seconds"]:[]),u=(n.indexOf(A.value[0])+e+n.length)%n.length,d=n.length/2;u<d?y.start_emitSelectRange(l[u]):y.end_emitSelectRange(l[u-d])},de=e=>{const n=e.code,{left:l,right:i,up:u,down:d}=xe;if([l,i].includes(n)){ue(n===l?-1:1),e.preventDefault();return}if([u,d].includes(n)){const g=n===u?-1:1,D=A.value[0]<j.value?"start":"end";y[`${D}_scrollDown`](g),e.preventDefault();return}},M=(e,n)=>{const l=k?k(e):[],i=e==="start",d=(n||(i?C.value:T.value)).hour(),g=i?c(d+1,23):c(0,d-1);return F(l,g)},I=(e,n,l)=>{const i=S?S(e,n):[],u=n==="start",d=l||(u?C.value:T.value),g=d.hour();if(e!==g)return i;const D=d.minute(),B=u?c(D+1,59):c(0,D-1);return F(i,B)},N=(e,n,l,i)=>{const u=V?V(e,n,l):[],d=l==="start",g=i||(d?C.value:T.value),D=g.hour(),B=g.minute();if(e!==D||n!==B)return u;const Y=g.second(),he=d?c(Y+1,59):c(0,Y-1);return F(u,he)},$=([e,n])=>[q(e,"start",!0,n),q(n,"end",!1,e)],{getAvailableHours:pe,getAvailableMinutes:me,getAvailableSeconds:fe}=He(M,I,N),{timePickerOptions:y,getAvailableTime:q,onSetOption:G}=Be({getAvailableHours:pe,getAvailableMinutes:me,getAvailableSeconds:fe}),be=e=>e?U(e)?e.map(n=>R(n,o.format).locale(b.value)):R(e,o.format).locale(b.value):null,ve=e=>e?U(e)?e.map(n=>n.format(o.format)):e.format(o.format):null,ge=()=>{if(U(E))return E.map(n=>R(n).locale(b.value));const e=R(E).locale(b.value);return[e,e.add(60,"m")]};return r("set-picker-option",["formatToString",ve]),r("set-picker-option",["parseUserInput",be]),r("set-picker-option",["isValidValue",re]),r("set-picker-option",["handleKeydownInput",de]),r("set-picker-option",["getDefaultValue",ge]),r("set-picker-option",["getRangeAvailableTime",$]),(e,n)=>e.actualVisible?(Oe(),Ve("div",{key:0,class:f([t(a).b("range-picker"),t(v).b("panel")])},[h("div",{class:f(t(a).be("range-picker","content"))},[h("div",{class:f(t(a).be("range-picker","cell"))},[h("div",{class:f(t(a).be("range-picker","header"))},O(t(p)("el.datepicker.startTime")),3),h("div",{class:f(t(X))},[x(Q,{ref:"minSpinner",role:"start","show-seconds":t(w),"am-pm-mode":t(K),"arrow-control":t(_),"spinner-date":t(T),"disabled-hours":M,"disabled-minutes":I,"disabled-seconds":N,onChange:se,onSetOption:t(G),onSelectRange:ie},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2),h("div",{class:f(t(a).be("range-picker","cell"))},[h("div",{class:f(t(a).be("range-picker","header"))},O(t(p)("el.datepicker.endTime")),3),h("div",{class:f(t(ee))},[x(Q,{ref:"maxSpinner",role:"end","show-seconds":t(w),"am-pm-mode":t(K),"arrow-control":t(_),"spinner-date":t(C),"disabled-hours":M,"disabled-minutes":I,"disabled-seconds":N,onChange:oe,onSetOption:t(G),onSelectRange:ce},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2)],2),h("div",{class:f(t(a).be("panel","footer"))},[h("button",{type:"button",class:f([t(a).be("panel","btn"),"cancel"]),onClick:l=>ae()},O(t(p)("el.datepicker.cancel")),11,["onClick"]),h("button",{type:"button",class:f([t(a).be("panel","btn"),"confirm"]),disabled:t(le),onClick:l=>te()},O(t(p)("el.datepicker.confirm")),11,["disabled","onClick"])],2)],2)):Ae("v-if",!0)}});var tn=we(an,[["__file","panel-time-range.vue"]]);R.extend(je);var sn=J({name:"ElTimePicker",install:null,props:{...Ue,isRange:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(s,r){const o=W(),[c,p]=s.isRange?["timerange",tn]:["time",Fe],b=a=>r.emit("update:modelValue",a);return Ee("ElPopperOptions",s.popperOptions),r.expose({focus:()=>{var a;(a=o.value)==null||a.focus()},blur:()=>{var a;(a=o.value)==null||a.blur()},handleOpen:()=>{var a;(a=o.value)==null||a.handleOpen()},handleClose:()=>{var a;(a=o.value)==null||a.handleClose()}}),()=>{var a;const v=(a=s.format)!=null?a:Ke;return x(Le,Me(s,{ref:o,type:c,format:v,"onUpdate:modelValue":b}),{default:m=>x(p,m,null)})}}});const cn=Ie(sn);export{cn as E};
