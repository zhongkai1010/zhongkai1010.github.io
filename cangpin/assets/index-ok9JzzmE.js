import{_ as H}from"./index-Bp4LVi3T.js";import{d as P,r as u,S as q,U as O,q as E,o as y,a6 as U,e as d,a8 as D,c as L,a as T,w as m,b as l,aO as A,aN as G,aI as W,z as K,aR as j,aK as J,aL as X,aM as Y,aW as Z,F as ee}from"./index-CdfaqyVI.js";import{_ as le}from"./index-BI_KGlxM.js";import{E as ae}from"./input-number-BM5QS7oD.js";import{E as te}from"./slider-uG_45cIP.js";import{q as Q,a as B,b as oe,E as ne,g as se,e as ie,S as me,c as de,_ as ue}from"./index-BO7yRpdf.js";import"./index-DHz7vUW5.js";const re={class:"ele-qr-code",style:{display:"inline-flex"}},ge=["src"],pe=["src"],ve=P({name:"CanvasRender",__name:"canvas-render",props:B,emits:Q,setup(k,{emit:V}){const i=k,f=V,a=u(""),h=u(null),S=u(null),o=()=>{const{value:s,size:C,level:I,bgColor:b,fgColor:e,margin:r,imageSettings:z}=i,g=h.value;if(!g)return;const n=g.getContext("2d");if(!n)return;if(!s){n.clearRect(0,0,g.width,g.height);return}let p=oe.QrCode.encodeText(s,ne[I]).getModules();const c=p.length+r*2,v=se(z,C,r,p),_=S.value,w=v!=null&&_!=null&&_.complete&&_.naturalHeight!==0&&_.naturalWidth!==0;w&&v.excavation!=null&&(p=ie(p,v.excavation));const x=window.devicePixelRatio||1;g.height=g.width=C*x;const R=C/c*x;n.scale(R,R),n.fillStyle=b,n.fillRect(0,0,c,c),n.fillStyle=e,me?n.fill(new Path2D(de(p,r))):p.forEach(function(M,$){M.forEach(function(t,F){t&&n.fillRect(F+r,$+r,1,1)})}),w&&n.drawImage(_,v.x+r,v.y+r,v.w,v.h),i.tag==="img"&&(a.value=g.toDataURL()),f("done")};return q([()=>i.value,()=>i.size,()=>i.level,()=>i.margin,()=>i.bgColor,()=>i.fgColor,()=>i.tag],()=>{o()}),q(()=>i.imageSettings,()=>{o()},{deep:!0}),O(()=>{o()}),(s,C)=>(y(),E("div",re,[s.tag==="img"?(y(),E("img",{key:0,src:a.value,style:D([{width:s.size+"px",height:s.size+"px"},s.customStyle||{}])},null,12,ge)):U("",!0),d("canvas",{ref_key:"canvasRef",ref:h,style:D([{width:s.size+"px",height:s.size+"px",display:s.tag==="img"?"none":void 0},s.customStyle||{}])},null,4),s.imageSettings&&s.imageSettings.src?(y(),E("img",{key:1,ref_key:"imageRef",ref:S,src:s.imageSettings.src,crossorigin:"anonymous",referrerpolicy:"no-referrer",style:{display:"none"},onLoad:o},null,40,pe)):U("",!0)]))}}),fe=P({name:"EleQrCode",__name:"index",props:B,emits:Q,setup(k,{emit:V}){const i=V,f=()=>{i("done")};return(a,h)=>a.tag==="svg"?(y(),L(ue,{key:0,value:a.value,size:a.size,level:a.level,bgColor:a.bgColor,fgColor:a.fgColor,margin:a.margin,imageSettings:a.imageSettings,customStyle:a.customStyle,onDone:f},null,8,["value","size","level","bgColor","fgColor","margin","imageSettings","customStyle"])):(y(),L(ve,{key:1,value:a.value,size:a.size,level:a.level,bgColor:a.bgColor,fgColor:a.fgColor,margin:a.margin,imageSettings:a.imageSettings,customStyle:a.customStyle,tag:a.tag,onDone:f},null,8,["value","size","level","bgColor","fgColor","margin","imageSettings","customStyle","tag"]))}}),ce={style:{"text-align":"center","margin-bottom":"8px"}},_e={style:{display:"flex","flex-wrap":"wrap"}},ye={style:{width:"120px","margin-right":"16px"}},Ve={style:{width:"120px"}},he={key:0,style:{display:"flex","flex-wrap":"wrap"}},xe={style:{display:"flex","align-items":"center"}},Se={style:{width:"120px"}},Ce={style:{display:"flex","align-items":"center"}},be={style:{width:"120px"}},N="https://cdn.eleadmin.com/20200610/logo-radius.png",Me=P({name:"ExtensionQrCode",__name:"index",setup(k){const V=u("https://eleadmin.com"),i=u("img"),f=u("L"),a=u(120),h=u(0),S=u(!0),o=T({src:N,width:28,height:28,x:void 0,y:void 0,excavate:!1}),s=u(!0),C=b=>{b?o.src=N:o.src=void 0},I=b=>{b?(o.x=void 0,o.y=void 0):(o.x=0,o.y=0)};return(b,e)=>{const r=fe,z=j,g=K,n=W,p=J,c=Y,v=X,_=te,w=Z,x=ae,R=A,M=le,$=H;return y(),L($,{"multi-card":!0},{default:m(()=>[l(M,{header:"基础用法"},{default:m(()=>[l(R,{"label-width":"88px",style:{"max-width":"420px"},onSubmit:e[13]||(e[13]=G(()=>{},["prevent"]))},{default:m(()=>[d("div",ce,[l(r,{value:V.value,size:a.value,level:f.value,margin:h.value,"image-settings":o,tag:i.value},null,8,["value","size","level","margin","image-settings","tag"])]),l(n,{label:"渲染方式"},{default:m(()=>[l(g,{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=t=>i.value=t)},{default:m(()=>[l(z,{value:"img",label:"img"}),l(z,{value:"canvas",label:"canvas"}),l(z,{value:"svg",label:"svg"})]),_:1},8,["modelValue"])]),_:1}),l(n,{label:"二维码内容"},{default:m(()=>[l(p,{modelValue:V.value,"onUpdate:modelValue":e[1]||(e[1]=t=>V.value=t),maxlength:150},null,8,["modelValue"])]),_:1}),l(n,{label:"容错等级"},{default:m(()=>[l(v,{modelValue:f.value,"onUpdate:modelValue":e[2]||(e[2]=t=>f.value=t),class:"ele-fluid","popper-options":{strategy:"fixed"}},{default:m(()=>[l(c,{value:"L",label:"L"}),l(c,{value:"M",label:"M"}),l(c,{value:"Q",label:"Q"}),l(c,{value:"H",label:"H"})]),_:1},8,["modelValue"])]),_:1}),l(n,{label:"尺寸"},{default:m(()=>[l(_,{modelValue:a.value,"onUpdate:modelValue":e[3]||(e[3]=t=>a.value=t),min:80,max:280,step:40},null,8,["modelValue"])]),_:1}),l(n,{label:"间距"},{default:m(()=>[l(_,{modelValue:h.value,"onUpdate:modelValue":e[4]||(e[4]=t=>h.value=t),min:0,max:20},null,8,["modelValue"])]),_:1}),l(n,{label:"自定义图片"},{default:m(()=>[l(w,{modelValue:S.value,"onUpdate:modelValue":e[5]||(e[5]=t=>S.value=t),size:"small",onChange:C},null,8,["modelValue"])]),_:1}),S.value?(y(),E(ee,{key:0},[l(n,{label:"图片地址"},{default:m(()=>[l(p,{modelValue:o.src,"onUpdate:modelValue":e[6]||(e[6]=t=>o.src=t),maxlength:400},null,8,["modelValue"])]),_:1}),l(n,{label:"图片宽高"},{default:m(()=>[d("div",_e,[d("div",ye,[l(x,{modelValue:o.width,"onUpdate:modelValue":e[7]||(e[7]=t=>o.width=t),size:"small",min:0,max:a.value},null,8,["modelValue","max"])]),d("div",Ve,[l(x,{modelValue:o.height,"onUpdate:modelValue":e[8]||(e[8]=t=>o.height=t),size:"small",min:0,max:a.value},null,8,["modelValue","max"])])])]),_:1}),l(n,{label:"位置居中"},{default:m(()=>[d("div",null,[l(w,{modelValue:s.value,"onUpdate:modelValue":e[9]||(e[9]=t=>s.value=t),size:"small",onChange:I},null,8,["modelValue"]),s.value?U("",!0):(y(),E("div",he,[d("div",xe,[e[14]||(e[14]=d("div",{style:{padding:"0 12px"}},"x",-1)),d("div",Se,[l(x,{modelValue:o.x,"onUpdate:modelValue":e[10]||(e[10]=t=>o.x=t),size:"small",min:0,max:a.value},null,8,["modelValue","max"])])]),d("div",Ce,[e[15]||(e[15]=d("div",{style:{padding:"0 12px"}},"y",-1)),d("div",be,[l(x,{modelValue:o.y,"onUpdate:modelValue":e[11]||(e[11]=t=>o.y=t),size:"small",min:0,max:a.value},null,8,["modelValue","max"])])])]))])]),_:1}),l(n,{label:"背景擦除"},{default:m(()=>[l(w,{modelValue:o.excavate,"onUpdate:modelValue":e[12]||(e[12]=t=>o.excavate=t),size:"small"},null,8,["modelValue"])]),_:1})],64)):U("",!0)]),_:1})]),_:1})]),_:1})}}});export{Me as default};
