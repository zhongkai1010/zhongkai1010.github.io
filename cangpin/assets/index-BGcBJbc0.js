import{d as P,bT as R,r as c,$ as h,L as B,q as E,o as l,e as b,b as $,a2 as z,a8 as n,c as a,w as S,a9 as k,u as s,fV as N,bW as g,bS as p,E as T,al as V,g as _,a7 as w,fW as A}from"./index-Dc28eGuE.js";const D={text:String,innerStyle:Object,customStyle:Object,icon:[String,Object,Function],iconProps:Object,iconStyle:Object,copiedIcon:[String,Object,Function],copiedIconProps:Object,copiedIconStyle:Object,tooltip:{type:[Boolean,Object],default:!0},resetAfter:{type:Number,default:1e3},locale:Object},F={copy:y=>!0},q=P({name:"EleCopyable",__name:"index",props:D,emits:F,setup(y,{emit:j}){const r=y,m=j,{lang:f}=R("copyable",r),t={timer:null},d=c(null),i=c(null),v=c(),o=c(!1),u=()=>{i.value&&i.value.updatePopper()},O=()=>{var e;return r.text?r.text:((e=d.value)==null?void 0:e.innerText)||""},C=()=>{A(O()).then(()=>{o.value=!0,u(),t.timer&&clearTimeout(t.timer),t.timer=setTimeout(()=>{o.value=!1,u()},r.resetAfter||1e3),m("copy")}).catch(e=>{o.value=!1,u(),m("copy",e)})},I=e=>{r.tooltip&&(v.value=e.currentTarget)};return h(()=>{t.timer&&clearTimeout(t.timer),t.timer=null,o.value=!1}),B(()=>{t.timer&&clearTimeout(t.timer),t.timer=null}),(e,L)=>(l(),E("div",{class:w(["ele-copyable",{"ele-copyable-done":o.value}])},[b("div",{ref_key:"innerRef",ref:d,class:"ele-copyable-inner",style:n(e.innerStyle)},[z(e.$slots,"default")],4),b("div",{class:"ele-copyable-icon",style:n(e.customStyle),onMouseover:I,onClick:C},[o.value?(l(),a(s(T),g(p({key:0},e.copiedIconProps||{})),{default:S(()=>[e.copiedIcon?(l(),a(k(e.copiedIcon),{key:0,style:n(e.copiedIconStyle)},null,8,["style"])):(l(),a(s(N),{key:1,style:n(e.copiedIconStyle)},null,8,["style"]))]),_:1},16)):(l(),a(s(T),g(p({key:1},e.iconProps||{})),{default:S(()=>[e.icon?(l(),a(k(e.icon),{key:0,style:n(e.iconStyle)},null,8,["style"])):(l(),a(s(V),{key:1,style:n(e.iconStyle)},null,8,["style"]))]),_:1},16))],36),$(_,p({placement:"top",offset:6},!e.tooltip||e.tooltip===!0?{}:e.tooltip,{content:o.value?s(f).copied:s(f).copy,virtualRef:v.value,virtualTriggering:!0,ref_key:"tooltipRef",ref:i}),null,16,["content","virtualRef"])],2))}});export{q as _};
