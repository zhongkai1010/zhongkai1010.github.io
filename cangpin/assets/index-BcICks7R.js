import{d as H,eZ as J,r as o,$ as Q,Z as W,q as S,o as n,a6 as h,c8 as F,b,F as X,v as Y,c as v,w as f,i as _,t as I,a8 as k,u,m as C,c9 as j,a2 as x,E as O,bS as ee,aL as ae,fT as le,a7 as w,bU as te,g as se,V as A}from"./index-Cam4GZdG.js";const oe={modelValue:Array,type:String,hit:Boolean,color:String,size:String,effect:String,round:Boolean,placeholder:String,inputStyle:Object,inputTagStyle:Object,buttonStyle:Object,itemStyle:Object,validator:Function,beforeRemove:Function,tooltipProps:Object,readonly:Boolean,disabled:Boolean},ne={"update:modelValue":p=>!0,change:p=>!0,itemClick:(p,z)=>!0},ue={key:0},re=H({name:"EleEditTag",__name:"index",props:oe,emits:ne,setup(p,{expose:z,emit:D}){const l=p,T=D,{validateChange:P}=J(),m=o(null),g=o(null),i=o(!1),s=o(""),r=o(""),c=o(!1),t=o(!1),y=o(!1),E=e=>{T("update:modelValue",e),P(),T("change",e)},B=e=>{if(t.value=!1,i.value=!1,N(""),r.value="",c.value=!1,e){const a=l.modelValue?[...l.modelValue]:[];a.push(e),E(a)}},R=e=>{if(!l.modelValue)return;const a=[...l.modelValue];a.splice(e,1),E(a)},N=e=>{s.value=e},$=()=>{setTimeout(()=>{g.value&&g.value.focus()},0)},L=()=>{l.disabled||(t.value=!1,r.value="",i.value=!0,A(()=>{$()}))},M=(e,a)=>{if(typeof l.beforeRemove!="function"){R(e);return}l.beforeRemove(e,a).then(()=>{R(e)}).catch(()=>{})},U=(e,a)=>{T("itemClick",e,a)},Z=()=>{if(s.value){if(typeof l.validator!="function"){B(s.value);return}c.value=!0,l.validator(s.value).then(()=>{B(s.value)}).catch(e=>{c.value=!1,e&&e.message!=null&&e.message!==""&&(r.value=e.message,i.value&&!y.value&&(t.value=!0)),A(()=>{$()})})}},q=()=>{t.value=!1,s.value||(i.value=!1,r.value="")},K=()=>{r.value&&!t.value&&i.value&&!y.value&&(t.value=!0)};return Q(()=>{y.value=!0,t.value=!1}),W(()=>{y.value=!1}),z({inputTagRef:m,inputRef:g}),(e,a)=>(n(),S("div",{class:w(["ele-edit-tag",{"is-large":e.size==="large"},{"is-small":e.size==="small"},{"is-disabled":e.disabled},{"is-readonly":e.readonly}])},[e.modelValue?(n(!0),S(X,{key:0},Y(e.modelValue,(d,V)=>(n(),v(u(C),{key:V+"-"+d,hit:e.hit,type:e.type,color:e.color,size:e.size,effect:e.effect,round:e.round,closable:!(e.readonly||e.disabled),disableTransitions:!0,style:k(e.itemStyle),onClose:G=>M(V,d),onClick:G=>U(V,d)},{default:f(()=>[_(I(d),1)]),_:2},1032,["hit","type","color","size","effect","round","closable","style","onClose","onClick"]))),128)):h("",!0),e.readonly?h("",!0):F((n(),v(u(C),{key:1,hit:e.hit,type:"info",size:e.size,round:e.round,disableTransitions:!0,class:"ele-edit-tag-add",style:k(e.buttonStyle),onClick:L},{default:f(()=>[x(e.$slots,"placeholder",{},()=>[e.placeholder?(n(),S("span",ue,I(e.placeholder),1)):(n(),v(u(O),{key:1,class:"ele-edit-tag-add-icon"},{default:f(()=>[b(u(ee))]),_:1}))])]),_:3},8,["hit","size","round","style"])),[[j,!i.value]]),e.readonly?h("",!0):F((n(),v(u(C),{key:2,ref_key:"inputTagRef",ref:m,size:e.size,round:e.round,disableTransitions:!0,class:w(["ele-edit-tag-input",{"is-error":!!r.value}]),style:k(e.inputTagStyle)},{default:f(()=>[b(u(ae),{ref_key:"inputRef",ref:g,disabled:c.value,modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=d=>s.value=d),validateEvent:!1,style:k(e.inputStyle),onChange:Z,onBlur:q,onFocus:K},{suffix:f(()=>[c.value?(n(),v(u(O),{key:0,class:"is-loading"},{default:f(()=>[b(u(le))]),_:1})):h("",!0)]),_:1},8,["disabled","modelValue","style"])]),_:1},8,["size","round","class","style"])),[[j,i.value]]),b(se,te({offset:7,hideAfter:0,trigger:"click",triggerKeys:[],disabled:!t.value},e.tooltipProps||{},{virtualTriggering:!0,virtualRef:m.value?m.value.$el:void 0,content:r.value,visible:t.value}),null,16,["disabled","virtualRef","content","visible"])],2))}});export{re as _};
